{"version":3,"sources":["src-es6/modules/store.js"],"names":[],"mappings":";;;MAAQ,MAAM,WAAN,MAAM;MAED,KAAK;QAAL,KAAK;;;;;;AAMH,aANF,KAAK,CAMF,EAAE,EAAE;AACZ,UAAI,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC;;AAEhB,UAAI,CAAC,QAAQ,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,mBAAmB,CAAC,GACzC,QAAQ,CAAC,CAAC,CAAC,mBAAmB,EAAE,EAAE,CAAC,GAAG,MAAM,CAAC;;AAEjD,UAAI,CAAC,EAAE,GAAG,EAAE,CAAC;KAChB;;AAbQ,SAAK,WAmBd,gBAAgB,GAAA,UAAC,IAAI,EAAC;AAClB,UAAI,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC;AACjB,UAAI,SAAS,GAAG,EAAE,CAAC;;AAEnB,WAAI,IAAI,CAAC,GAAC,CAAC,EAAE,CAAC,GAAC,EAAE,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAC;AACjC,YAAI,KAAK,GAAG,EAAE,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;AACjC,YAAI,KAAK,KAAK,EAAE,EAAC;AACb,eAAK,GAAG,GAAG,CAAC;SACf;AACD,iBAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;OACzB;;AAED,eAAS,CAAC,IAAI,CAAC,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;;;AAGjC,YAAM,CAAC,KAAK,CACR,IAAI,EACJ,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,SAAS,CAAC,EAC5B,IAAI,CAAC,QAAQ,CAChB,CAAC;KACL;;AAvCQ,SAAK,WA8Cd,eAAe,GAAA,UAAC,IAAI,EAAC;AACjB,UAAI,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAC7B,UAAI,GAAG,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;;AAE7C,aAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;KAC1B;;AAnDQ,SAAK,WAyDd,UAAU,GAAA,UAAC,IAAI,EAAC;AACZ,YAAM,CAAC,KAAK,CACR,IAAI,EACJ,IAAI,CAAC,EAAE,CAAC,aAAa,EACrB,IAAI,CAAC,QAAQ,CAChB,CAAC;KACL;;AA/DQ,SAAK,WAsEd,SAAS,GAAA,UAAC,IAAI,EAAC;AACX,aAAO,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;KAC5B;;AAxEQ,SAAK,WA8Ed,cAAc,GAAA,UAAC,IAAI,EAAC;AAChB,YAAM,CAAC,KAAK,CACR,IAAI,EACJ,IAAI,CAAC,EAAE,CAAC,iBAAiB,CAAC,aAAa,EACvC,IAAI,CAAC,QAAQ,CAChB,CAAC;KACL;;AApFQ,SAAK,WA2Fd,aAAa,GAAA,UAAC,IAAI,EAAC;AACf,aAAO,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;KAC5B;;WA7FQ,KAAK;;;UAAL,KAAK,GAAL,KAAK","file":"src-es6/modules/store.js","sourcesContent":["import {Cookie} from '../cookie';\n\nexport class Store{\n\n    /**\n     * Store, persistence manager\n     * @param {Object} tf TableFilter instance\n     */\n    constructor(tf) {\n        var f = tf.fObj;\n\n        this.duration = !isNaN(f.set_cookie_duration) ?\n            parseInt(f.set_cookie_duration, 10) : 100000;\n\n        this.tf = tf;\n    }\n\n    /**\n     * Store filters' values in cookie\n     * @param {String} cookie name\n     */\n    saveFilterValues(name){\n        var tf = this.tf;\n        var fltValues = [];\n        //store filters' values\n        for(var i=0; i<tf.fltIds.length; i++){\n            var value = tf.GetFilterValue(i);\n            if (value === ''){\n                value = ' ';\n            }\n            fltValues.push(value);\n        }\n        //adds array size\n        fltValues.push(tf.fltIds.length);\n\n        //writes cookie\n        Cookie.write(\n            name,\n            fltValues.join(tf.separator),\n            this.duration\n        );\n    }\n\n    /**\n     * Retrieve filters' values from cookie\n     * @param {String} cookie name\n     * @return {Array}\n     */\n    getFilterValues(name){\n        var flts = Cookie.read(name);\n        var rgx = new RegExp(this.tf.separator, 'g');\n        // filters' values array\n        return flts.split(rgx);\n    }\n\n    /**\n     * Store page number in cookie\n     * @param {String} cookie name\n     */\n    savePageNb(name){\n        Cookie.write(\n            name,\n            this.tf.currentPageNb,\n            this.duration\n        );\n    }\n\n    /**\n     * Retrieve page number from cookie\n     * @param {String} cookie name\n     * @return {String}\n     */\n    getPageNb(name){\n        return Cookie.read(name);\n    }\n\n    /**\n     * Store page length in cookie\n     * @param {String} cookie name\n     */\n    savePageLength(name){\n        Cookie.write(\n            name,\n            this.tf.resultsPerPageSlc.selectedIndex,\n            this.duration\n        );\n    }\n\n    /**\n     * Retrieve page length from cookie\n     * @param {String} cookie name\n     * @return {String}\n     */\n    getPageLength(name){\n        return Cookie.read(name);\n    }\n\n}\n"]}