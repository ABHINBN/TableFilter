{"version":3,"sources":["src-es6/modules/store.js"],"names":[],"mappings":";;;;;;;;MAAQ,MAAM,WAAN,MAAM;MAED,KAAK;QAAL,KAAK,GAMH,SANF,KAAK,CAMF,EAAE,EAAE;AACZ,UAAI,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC;;AAEhB,UAAI,CAAC,QAAQ,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,mBAAmB,CAAC,GACzC,QAAQ,CAAC,CAAC,CAAC,mBAAmB,EAAE,EAAE,CAAC,GAAG,MAAM,CAAC;;AAEjD,UAAI,CAAC,EAAE,GAAG,EAAE,CAAC;KAChB;;gBAbQ,KAAK;AAmBd,sBAAgB;;eAAA,UAAC,IAAI,EAAC;AAClB,cAAI,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC;AACjB,cAAI,SAAS,GAAG,EAAE,CAAC;;AAEnB,eAAI,IAAI,CAAC,GAAC,CAAC,EAAE,CAAC,GAAC,EAAE,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAC;AACjC;AACA,8BAAiB;AACb,mBAAK,GAAG,GAAG,CAAC;;AAEhB;WACH;;AAED,mBAAS,CAAC,IAAI,CAAC,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;;;AAGjC,gBAAM,CAAC,KAAK,CACR,IAAI,EACJ,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,SAAS,CAAC,EAC5B,IAAI,CAAC,QAAQ,CAChB,CAAC;SACL;;AAOD,qBAAe;;eAAA,UAAC,IAAI,EAAC;AACjB,cAAI,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAC7B,cAAI,GAAG,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;;AAE7C,iBAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;SAC1B;;AAMD,gBAAU;;eAAA,UAAC,IAAI,EAAC;AACZ,gBAAM,CAAC,KAAK,CACR,IAAI,EACJ,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,MAAM,CAAC,aAAa,EAChC,IAAI,CAAC,QAAQ,CAChB,CAAC;SACL;;AAOD,eAAS;;eAAA,UAAC,IAAI,EAAC;AACX,iBAAO,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SAC5B;;AAMD,oBAAc;;eAAA,UAAC,IAAI,EAAC;AAChB,gBAAM,CAAC,KAAK,CACR,IAAI,EACJ,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,MAAM,CAAC,iBAAiB,CAAC,aAAa,EAClD,IAAI,CAAC,QAAQ,CAChB,CAAC;SACL;;AAOD,mBAAa;;eAAA,UAAC,IAAI,EAAC;AACf,iBAAO,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SAC5B;;;;WA7FQ,KAAK;;;UAAL,KAAK,GAAL,KAAK","file":"src-es6/modules/store.js","sourcesContent":["import {Cookie} from '../cookie';\r\n\r\nexport class Store{\r\n\r\n    /**\r\n     * Store, persistence manager\r\n     * @param {Object} tf TableFilter instance\r\n     */\r\n    constructor(tf) {\r\n        var f = tf.fObj;\r\n\r\n        this.duration = !isNaN(f.set_cookie_duration) ?\r\n            parseInt(f.set_cookie_duration, 10) : 100000;\r\n\r\n        this.tf = tf;\r\n    }\r\n\r\n    /**\r\n     * Store filters' values in cookie\r\n     * @param {String} cookie name\r\n     */\r\n    saveFilterValues(name){\r\n        var tf = this.tf;\r\n        var fltValues = [];\r\n        //store filters' values\r\n        for(var i=0; i<tf.fltIds.length; i++){\r\n            var value = tf.GetFilterValue(i);\r\n            if (value === ''){\r\n                value = ' ';\r\n            }\r\n            fltValues.push(value);\r\n        }\r\n        //adds array size\r\n        fltValues.push(tf.fltIds.length);\r\n\r\n        //writes cookie\r\n        Cookie.write(\r\n            name,\r\n            fltValues.join(tf.separator),\r\n            this.duration\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Retrieve filters' values from cookie\r\n     * @param {String} cookie name\r\n     * @return {Array}\r\n     */\r\n    getFilterValues(name){\r\n        var flts = Cookie.read(name);\r\n        var rgx = new RegExp(this.tf.separator, 'g');\r\n        // filters' values array\r\n        return flts.split(rgx);\r\n    }\r\n\r\n    /**\r\n     * Store page number in cookie\r\n     * @param {String} cookie name\r\n     */\r\n    savePageNb(name){\r\n        Cookie.write(\r\n            name,\r\n            this.tf.Cpt.paging.currentPageNb,\r\n            this.duration\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Retrieve page number from cookie\r\n     * @param {String} cookie name\r\n     * @return {String}\r\n     */\r\n    getPageNb(name){\r\n        return Cookie.read(name);\r\n    }\r\n\r\n    /**\r\n     * Store page length in cookie\r\n     * @param {String} cookie name\r\n     */\r\n    savePageLength(name){\r\n        Cookie.write(\r\n            name,\r\n            this.tf.Cpt.paging.resultsPerPageSlc.selectedIndex,\r\n            this.duration\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Retrieve page length from cookie\r\n     * @param {String} cookie name\r\n     * @return {String}\r\n     */\r\n    getPageLength(name){\r\n        return Cookie.read(name);\r\n    }\r\n\r\n}\r\n"]}