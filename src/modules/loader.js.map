{"version":3,"sources":["src-es6/modules/loader.js"],"names":[],"mappings":"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","file":"src-es6/modules/loader.js","sourcesContent":["\nimport {Dom} from '../dom';\nimport {Types} from '../types';\n\nvar global = window;\n\n/**\n * Loading message/spinner\n * @param {Object} tf TableFilter instance\n */\nexport class Loader{\n\n    constructor(tf){\n\n        // TableFilter configuration\n        var f = tf.fObj;\n        //id of container element\n        this.loaderTgtId = f.loader_target_id || null;\n        //div containing loader\n        this.loaderDiv = null;\n        //defines loader text\n        this.loaderText = f.loader_text || 'Loading...';\n        //defines loader innerHtml\n        this.loaderHtml = f.loader_html || null;\n        //defines css class for loader div\n        this.loaderCssClass = f.loader_css_class || 'loader';\n        //delay for hiding loader\n        this.loaderCloseDelay = 200;\n        //callback function before loader is displayed\n        this.onShowLoader = Types.isFn(f.on_show_loader) ?\n            f.on_show_loader : null;\n        //callback function after loader is closed\n        this.onHideLoader = Types.isFn(f.on_hide_loader) ?\n            f.on_hide_loader : null;\n\n        this.tf = tf;\n\n        var containerDiv = Dom.create('div', ['id', tf.prfxLoader+tf.id]);\n        containerDiv.className = this.loaderCssClass;\n\n        var targetEl = !this.loaderTgtId ?\n            tf.tbl.parentNode : Dom.id(this.loaderTgtId);\n        if(!this.loaderTgtId){\n            targetEl.insertBefore(containerDiv, tf.tbl);\n        } else {\n            targetEl.appendChild(containerDiv);\n        }\n        this.loaderDiv = Dom.id(tf.prfxLoader+tf.id);\n        if(!this.loaderHtml){\n            this.loaderDiv.appendChild(Dom.text(this.loaderText));\n        } else {\n            this.loaderDiv.innerHTML = this.loaderHtml;\n        }\n    }\n\n    show(p) {\n        if(!this.tf.loader || !this.loaderDiv ||\n            this.loaderDiv.style.display===p){\n            return;\n        }\n\n        var displayLoader = () => {\n            if(!this.loaderDiv){\n                return;\n            }\n            if(this.onShowLoader && p!=='none'){\n                this.onShowLoader.call(null, this);\n            }\n            this.loaderDiv.style.display = p;\n            if(this.onHideLoader && p==='none'){\n                this.onHideLoader.call(null, this);\n            }\n        };\n\n        var t = p==='none' ? this.loaderCloseDelay : 1;\n        global.setTimeout(displayLoader, t);\n    }\n\n    remove(){\n        if(!this.loaderDiv){\n            return;\n        }\n        var targetEl = !this.loaderTgtId ?\n            (this.tf.gridLayout ? this.tf.tblCont : this.tf.tbl.parentNode):\n            Dom.id(this.loaderTgtId);\n        targetEl.removeChild(this.loaderDiv);\n        this.loaderDiv = null;\n    }\n}\n"]}