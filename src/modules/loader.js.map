{"version":3,"sources":["src-es6/modules/loader.js"],"names":[],"mappings":"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","file":"src-es6/modules/loader.js","sourcesContent":["\r\nimport {Dom} from '../dom';\r\nimport {Types} from '../types';\r\n\r\nvar global = window;\r\n\r\n/**\r\n * Loading message/spinner\r\n * @param {Object} tf TableFilter instance\r\n */\r\nexport class Loader{\r\n\r\n    constructor(tf){\r\n\r\n        // TableFilter configuration\r\n        var f = tf.fObj;\r\n        //id of container element\r\n        this.loaderTgtId = f.loader_target_id || null;\r\n        //div containing loader\r\n        this.loaderDiv = null;\r\n        //defines loader text\r\n        this.loaderText = f.loader_text || 'Loading...';\r\n        //defines loader innerHtml\r\n        this.loaderHtml = f.loader_html || null;\r\n        //defines css class for loader div\r\n        this.loaderCssClass = f.loader_css_class || 'loader';\r\n        //delay for hiding loader\r\n        this.loaderCloseDelay = 200;\r\n        //callback function before loader is displayed\r\n        this.onShowLoader = Types.isFn(f.on_show_loader) ?\r\n            f.on_show_loader : null;\r\n        //callback function after loader is closed\r\n        this.onHideLoader = Types.isFn(f.on_hide_loader) ?\r\n            f.on_hide_loader : null;\r\n\r\n        this.tf = tf;\r\n\r\n        var containerDiv = Dom.create('div', ['id', tf.prfxLoader+tf.id]);\r\n        containerDiv.className = this.loaderCssClass;\r\n\r\n        var targetEl = !this.loaderTgtId ?\r\n            tf.tbl.parentNode : Dom.id(this.loaderTgtId);\r\n        if(!this.loaderTgtId){\r\n            targetEl.insertBefore(containerDiv, tf.tbl);\r\n        } else {\r\n            targetEl.appendChild(containerDiv);\r\n        }\r\n        this.loaderDiv = Dom.id(tf.prfxLoader+tf.id);\r\n        if(!this.loaderHtml){\r\n            this.loaderDiv.appendChild(Dom.text(this.loaderText));\r\n        } else {\r\n            this.loaderDiv.innerHTML = this.loaderHtml;\r\n        }\r\n    }\r\n\r\n    show(p) {\r\n        if(!this.tf.loader || !this.loaderDiv ||\r\n            this.loaderDiv.style.display===p){\r\n            return;\r\n        }\r\n\r\n        var displayLoader = () => {\r\n            if(!this.loaderDiv){\r\n                return;\r\n            }\r\n            if(this.onShowLoader && p!=='none'){\r\n                this.onShowLoader.call(null, this);\r\n            }\r\n            this.loaderDiv.style.display = p;\r\n            if(this.onHideLoader && p==='none'){\r\n                this.onHideLoader.call(null, this);\r\n            }\r\n        };\r\n\r\n        var t = p==='none' ? this.loaderCloseDelay : 1;\r\n        global.setTimeout(displayLoader, t);\r\n    }\r\n\r\n    remove(){\r\n        if(!this.loaderDiv){\r\n            return;\r\n        }\r\n        var targetEl = !this.loaderTgtId ?\r\n            (this.tf.gridLayout ? this.tf.tblCont : this.tf.tbl.parentNode):\r\n            Dom.id(this.loaderTgtId);\r\n        targetEl.removeChild(this.loaderDiv);\r\n        this.loaderDiv = null;\r\n    }\r\n}\r\n"]}