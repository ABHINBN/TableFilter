{"version":3,"sources":["src-es6/modules/gridLayout.js"],"names":[],"mappings":"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","file":"src-es6/modules/gridLayout.js","sourcesContent":["import {Dom} from '../dom';\r\nimport {Types} from '../types';\r\nimport {Helpers} from '../helpers';\r\nimport {Event} from '../event';\r\n\r\nexport class GridLayout{\r\n\r\n    constructor(tf) {\r\n        var f = tf.fObj;\r\n\r\n        //defines grid width\r\n        this.gridWidth = f.grid_width || null;\r\n        //defines grid height\r\n        this.gridHeight = f.grid_height || null;\r\n        //defines css class for main container\r\n        this.gridMainContCssClass = f.grid_cont_css_class || 'grd_Cont';\r\n        //defines css class for div containing table\r\n        this.gridContCssClass = f.grid_tbl_cont_css_class || 'grd_tblCont';\r\n        //defines css class for div containing headers' table\r\n        this.gridHeadContCssClass = f.grid_tblHead_cont_css_class ||\r\n            'grd_headTblCont';\r\n        //defines css class for div containing rows counter, paging etc.\r\n        this.gridInfDivCssClass = f.grid_inf_grid_css_class || 'grd_inf';\r\n        //defines which row contains column headers\r\n        this.gridHeadRowIndex = f.grid_headers_row_index || 0;\r\n        //array of headers row indexes to be placed in header table\r\n        this.gridHeadRows = f.grid_headers_rows || [0];\r\n        //generate filters in table headers\r\n        this.gridEnableFilters = f.grid_enable_default_filters!==undefined ?\r\n            f.grid_enable_default_filters : true;\r\n        //default col width\r\n        this.gridDefaultColWidth = f.grid_default_col_width || '100px';\r\n        //enables/disables columns resizer\r\n        this.gridEnableColResizer = f.grid_enable_cols_resizer!==undefined ?\r\n            f.grid_enable_cols_resizer : true;\r\n        //defines col resizer script path\r\n        this.gridColResizerPath = f.grid_cont_col_resizer_path ||\r\n            this.basePath+'TFExt_ColsResizer/TFExt_ColsResizer.js';\r\n\r\n        this.tf = tf;\r\n    }\r\n\r\n    init(){\r\n        var tf = this.tf;\r\n        var f = tf.fObj;\r\n        var tbl = tf.tbl;\r\n\r\n        tf.isExternalFlt = true;\r\n\r\n        // in case column widths are not set default width 100px\r\n        if(!tf.hasColWidth){\r\n            tf.colWidth = [];\r\n            for(var k=0; k<tf.nbCells; k++){\r\n                var colW,\r\n                    cell = tbl.rows[this.gridHeadRowIndex].cells[k];\r\n                if(cell.width!==''){\r\n                    colW = cell.width;\r\n                } else if(cell.style.width!==''){\r\n                    colW = parseInt(cell.style.width, 10);\r\n                } else {\r\n                    colW = this.gridDefaultColWidth;\r\n                }\r\n                tf.colWidth[k] = colW;\r\n            }\r\n            tf.hasColWidth = true;\r\n        }\r\n        tf.SetColWidths(this.gridHeadRowIndex);\r\n\r\n        var tblW;//initial table width\r\n        if(tbl.width!==''){\r\n            tblW = tbl.width;\r\n        }\r\n        else if(tbl.style.width!==''){\r\n            tblW = parseInt(tbl.style.width, 10);\r\n        } else {\r\n            tblW = tbl.clientWidth;\r\n        }\r\n\r\n        //Main container: it will contain all the elements\r\n        this.tblMainCont = Dom.create('div',['id', tf.prfxMainTblCont + tf.id]);\r\n        this.tblMainCont.className = this.gridMainContCssClass;\r\n        if(this.gridWidth){\r\n            this.tblMainCont.style.width = this.gridWidth;\r\n        }\r\n        tbl.parentNode.insertBefore(this.tblMainCont, tf.tbl);\r\n\r\n        //Table container: div wrapping content table\r\n        this.tblCont = Dom.create('div',['id', tf.prfxTblCont + tf.id]);\r\n        this.tblCont.className = this.gridContCssClass;\r\n        if(this.gridWidth){\r\n            this.tblCont.style.width = this.gridWidth;\r\n        }\r\n        if(this.gridHeight){\r\n            this.tblCont.style.height = this.gridHeight;\r\n        }\r\n        tbl.parentNode.insertBefore(this.tblCont, tf.tbl);\r\n        var t = tbl.parentNode.removeChild(tf.tbl);\r\n        this.tblCont.appendChild(t);\r\n\r\n        //In case table width is expressed in %\r\n        if(tbl.style.width === ''){\r\n            tbl.style.width = (tf.__containsStr('%', tblW) ?\r\n                tbl.clientWidth : tblW) + 'px';\r\n        }\r\n\r\n        var d = this.tblCont.parentNode.removeChild(this.tblCont);\r\n        this.tblMainCont.appendChild(d);\r\n\r\n        //Headers table container: div wrapping headers table\r\n        this.headTblCont = Dom.create(\r\n            'div',['id', tf.prfxHeadTblCont + tf.id]);\r\n        this.headTblCont.className = this.gridHeadContCssClass;\r\n        if(this.gridWidth){\r\n            this.headTblCont.style.width = this.gridWidth;\r\n        }\r\n\r\n        //Headers table\r\n        this.headTbl = Dom.create('table', ['id', tf.prfxHeadTbl + tf.id]);\r\n        var tH = Dom.create('tHead'); //IE<7 needs it\r\n\r\n        //1st row should be headers row, ids are added if not set\r\n        //Those ids are used by the sort feature\r\n        var hRow = tbl.rows[this.gridHeadRowIndex];\r\n        var sortTriggers = [];\r\n        for(var n=0; n<tf.nbCells; n++){\r\n            var c = hRow.cells[n];\r\n            var thId = c.getAttribute('id');\r\n            if(!thId || thId===''){\r\n                thId = tf.prfxGridTh+n+'_'+tf.id;\r\n                c.setAttribute('id', thId);\r\n            }\r\n            sortTriggers.push(thId);\r\n        }\r\n\r\n        //Filters row is created\r\n        var filtersRow = Dom.create('tr');\r\n        if(this.gridEnableFilters && tf.fltGrid){\r\n            tf.externalFltTgtIds = [];\r\n            for(var j=0; j<tf.nbCells; j++){\r\n                var fltTdId = tf.prfxFlt+j+ tf.prfxGridFltTd +tf.id;\r\n                var cl = Dom.create(tf.fltCellTag, ['id', fltTdId]);\r\n                filtersRow.appendChild(cl);\r\n                tf.externalFltTgtIds[j] = fltTdId;\r\n            }\r\n        }\r\n        //Headers row are moved from content table to headers table\r\n        for(var i=0; i<this.gridHeadRows.length; i++){\r\n            var headRow = tbl.rows[this.gridHeadRows[0]];\r\n            tH.appendChild(headRow);\r\n        }\r\n        this.headTbl.appendChild(tH);\r\n        if(tf.filtersRowIndex === 0){\r\n            tH.insertBefore(filtersRow,hRow);\r\n        } else {\r\n            tH.appendChild(filtersRow);\r\n        }\r\n\r\n        this.headTblCont.appendChild(this.headTbl);\r\n        this.tblCont.parentNode.insertBefore(this.headTblCont, this.tblCont);\r\n\r\n        //THead needs to be removed in content table for sort feature\r\n        var thead = Dom.tag(tf.tbl, 'thead');\r\n        if(thead.length>0){\r\n            tbl.removeChild(thead[0]);\r\n        }\r\n\r\n        //Headers table style\r\n        this.headTbl.style.width = tbl.style.width;\r\n        this.headTbl.style.tableLayout = 'fixed';\r\n        tbl.style.tableLayout = 'fixed';\r\n        this.headTbl.cellPadding = tbl.cellPadding;\r\n        this.headTbl.cellSpacing = tbl.cellSpacing;\r\n\r\n        //Headers container width\r\n        this.headTblCont.style.width = this.tblCont.clientWidth+'px';\r\n\r\n        //content table without headers needs col widths to be reset\r\n        tf.SetColWidths();\r\n\r\n        tbl.style.width = '';\r\n        if(Helpers.isIE()){\r\n            this.headTbl.style.width = '';\r\n        }\r\n\r\n        //scroll synchronisation\r\n        var o = this; //TF object\r\n\r\n        Event.add(this.tblCont, 'scroll', function(){\r\n            o.headTblCont.scrollLeft = this.scrollLeft;\r\n            var _o = this; //this = scroll element\r\n            //New pointerX calc taking into account scrollLeft\r\n            if(!o.isPointerXOverwritten){\r\n                try{\r\n                    o.Evt.pointerX = function(e){\r\n                        e = e || global.event;\r\n                        var scrollLeft = tf_StandardBody().scrollLeft +\r\n                                _o.scrollLeft;\r\n                        return (e.pageX + _o.scrollLeft) ||\r\n                            (e.clientX + scrollLeft);\r\n                    };\r\n                    o.isPointerXOverwritten = true;\r\n                } catch(err) {\r\n                    o.isPointerXOverwritten = false;\r\n                }\r\n            }\r\n        });\r\n\r\n        //Sort is enabled if not specified in config object\r\n        if(f.sort !== false){\r\n            tf.sort = true;\r\n            tf.sortConfig.asyncSort = true;\r\n            tf.sortConfig.triggerIds = sortTriggers;\r\n        }\r\n\r\n        if(this.gridEnableColResizer){\r\n            if(!tf.hasExtensions){\r\n                tf.extensions = {\r\n                    name:['ColumnsResizer_'+tf.id],\r\n                    src:[this.gridColResizerPath],\r\n                    description:['Columns Resizing'],\r\n                    initialize:[function(o){\r\n                        o.SetColsResizer('ColumnsResizer_'+o.id);}]\r\n                };\r\n                tf.hasExtensions = true;\r\n            } else {\r\n                if(!tf.__containsStr(\r\n                    'colsresizer',\r\n                    Str.lower(tf.extensions.src.toString())) ){\r\n                    tf.extensions.name.push('ColumnsResizer_'+tf.id);\r\n                    tf.extensions.src.push(tf.gridColResizerPath);\r\n                    tf.extensions.description.push('Columns Resizing');\r\n                    tf.extensions.initialize.push(function(o){\r\n                        o.SetColsResizer('ColumnsResizer_'+o.id);});\r\n                }\r\n            }\r\n        }\r\n\r\n        //Default columns resizer properties for grid layout\r\n        f.col_resizer_cols_headers_table = this.headTbl.getAttribute('id');\r\n        f.col_resizer_cols_headers_index = this.gridHeadRowIndex;\r\n        f.col_resizer_width_adjustment = 0;\r\n        f.col_enable_text_ellipsis = false;\r\n\r\n        //Cols generation for all browsers excepted IE<=7\r\n        o.tblHasColTag = Dom.tag(tbl, 'col').length > 0 ? true : false;\r\n        if(!Helpers.isIE()){\r\n            //Col elements are enough to keep column widths after sorting and\r\n            //filtering\r\n            var createColTags = function(o){\r\n                if(!o){\r\n                    return;\r\n                }\r\n                for(var k=(o.nbCells-1); k>=0; k--){\r\n                    var col = Dom.create( 'col', ['id', o.id+'_col_'+k]);\r\n                    tbl.firstChild.parentNode.insertBefore(col, tbl.firstChild);\r\n                    col.style.width = o.colWidth[k];\r\n                    o.gridColElms[k] = col;\r\n                }\r\n                o.tblHasColTag = true;\r\n            };\r\n            if(!o.tblHasColTag){\r\n                createColTags(o);\r\n            } else {\r\n                var cols = Dom.tag(tbl,'col');\r\n                for(var ii=0; ii<o.nbCells; ii++){\r\n                    cols[ii].setAttribute('id', o.id+'_col_'+ii);\r\n                    cols[ii].style.width = o.colWidth[ii];\r\n                    o.gridColElms.push(cols[ii]);\r\n                }\r\n            }\r\n        }\r\n\r\n        //IE <= 7 needs an additional row for widths as col element width is\r\n        //not enough...\r\n        if(Helpers.isIE()){\r\n            var tbody = Dom.tag(tbl,'tbody'),\r\n                r;\r\n            if( tbody.length>0 ){\r\n                r = tbody[0].insertRow(0);\r\n            } else{\r\n                r = tbl.insertRow(0);\r\n            }\r\n            r.style.height = '0px';\r\n            for(var x=0; x<o.nbCells; x++){\r\n                var col = Dom.create('td', ['id', o.id+'_col_'+x]);\r\n                col.style.width = o.colWidth[x];\r\n                tbl.rows[1].cells[x].style.width = '';\r\n                r.appendChild(col);\r\n                o.gridColElms.push(col);\r\n            }\r\n            this.hasGridWidthsRow = true;\r\n            //Data table row with widths expressed\r\n            o.leadColWidthsRow = tbl.rows[0];\r\n            o.leadColWidthsRow.setAttribute('validRow', 'false');\r\n\r\n            var beforeSortFn = Types.isFn(f.on_before_sort) ?\r\n                f.on_before_sort : null;\r\n            f.on_before_sort = function(o, colIndex){\r\n                o.leadColWidthsRow.setAttribute('validRow', 'false');\r\n                if(beforeSortFn){\r\n                    beforeSortFn.call(null, o, colIndex);\r\n                }\r\n            };\r\n\r\n            var afterSortFn = Types.isFn(f.on_after_sort) ?\r\n                f.on_after_sort : null;\r\n            f.on_after_sort = function(o,colIndex){\r\n                if(o.leadColWidthsRow.rowIndex !== 0){\r\n                    var r = o.leadColWidthsRow;\r\n                    if(tbody.length>0){\r\n                        tbody[0].moveRow(o.leadColWidthsRow.rowIndex, 0);\r\n                    } else {\r\n                        tbl.moveRow(o.leadColWidthsRow.rowIndex, 0);\r\n                    }\r\n                }\r\n                if(afterSortFn){\r\n                    afterSortFn.call(null, o, colIndex);\r\n                }\r\n            };\r\n        }\r\n\r\n        var afterColResizedFn = Types.isFn(f.on_after_col_resized) ?\r\n            f.on_after_col_resized : null;\r\n        f.on_after_col_resized = function(o,colIndex){\r\n            if(!colIndex){\r\n                return;\r\n            }\r\n            var w = o.crWColsRow.cells[colIndex].style.width;\r\n            var col = o.gridColElms[colIndex];\r\n            col.style.width = w;\r\n\r\n            var thCW = o.crWColsRow.cells[colIndex].clientWidth;\r\n            var tdCW = o.crWRowDataTbl.cells[colIndex].clientWidth;\r\n\r\n            if(Helpers.isIE()){\r\n                tbl.style.width = o.headTbl.clientWidth+'px';\r\n            }\r\n\r\n            if(thCW != tdCW && !Helpers.isIE()){\r\n                o.headTbl.style.width = tbl.clientWidth+'px';\r\n            }\r\n\r\n            if(afterColResizedFn){\r\n                afterColResizedFn.call(null,o,colIndex);\r\n            }\r\n        };\r\n\r\n        if(tbl.clientWidth !== this.headTbl.clientWidth){\r\n            tbl.style.width = this.headTbl.clientWidth+'px';\r\n        }\r\n\r\n        tf.refRow = Helpers.isIE() ? (tf.refRow+1) : 0;\r\n    }\r\n\r\n    destroy(){\r\n        var tf = this.tf;\r\n        var tbl = tf.tbl;\r\n\r\n        if(!tf.gridLayout){\r\n            return;\r\n        }\r\n        var t = tbl.parentNode.removeChild(tbl);\r\n        this.tblMainCont.parentNode.insertBefore(t, this.tblMainCont);\r\n        this.tblMainCont.parentNode.removeChild(this.tblMainCont);\r\n\r\n        this.tblMainCont = null;\r\n        this.headTblCont = null;\r\n        this.headTbl = null;\r\n        this.tblCont = null;\r\n\r\n        tbl.outerHTML = tf.sourceTblHtml;\r\n        tbl = Dom.id(tf.id); //needed to keep reference\r\n    }\r\n}"]}