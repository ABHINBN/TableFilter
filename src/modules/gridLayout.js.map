{"version":3,"sources":["src-es6/modules/gridLayout.js"],"names":[],"mappings":"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","file":"src-es6/modules/gridLayout.js","sourcesContent":["import {Dom} from '../dom';\nimport {Types} from '../types';\nimport {Helpers} from '../helpers';\nimport {Event} from '../event';\n\nexport class GridLayout{\n\n    /**\n     * Grid layout, table with fixed headers\n     * @param {Object} tf TableFilter instance\n     */\n    constructor(tf) {\n        var f = tf.fObj;\n\n        //defines grid width\n        this.gridWidth = f.grid_width || null;\n        //defines grid height\n        this.gridHeight = f.grid_height || null;\n        //defines css class for main container\n        this.gridMainContCssClass = f.grid_cont_css_class || 'grd_Cont';\n        //defines css class for div containing table\n        this.gridContCssClass = f.grid_tbl_cont_css_class || 'grd_tblCont';\n        //defines css class for div containing headers' table\n        this.gridHeadContCssClass = f.grid_tblHead_cont_css_class ||\n            'grd_headTblCont';\n        //defines css class for div containing rows counter, paging etc.\n        this.gridInfDivCssClass = f.grid_inf_grid_css_class || 'grd_inf';\n        //defines which row contains column headers\n        this.gridHeadRowIndex = f.grid_headers_row_index || 0;\n        //array of headers row indexes to be placed in header table\n        this.gridHeadRows = f.grid_headers_rows || [0];\n        //generate filters in table headers\n        this.gridEnableFilters = f.grid_enable_default_filters!==undefined ?\n            f.grid_enable_default_filters : true;\n        //default col width\n        this.gridDefaultColWidth = f.grid_default_col_width || '100px';\n        //enables/disables columns resizer\n        this.gridEnableColResizer = f.grid_enable_cols_resizer!==undefined ?\n            f.grid_enable_cols_resizer : false;\n        //defines col resizer script path\n        this.gridColResizerPath = f.grid_cont_col_resizer_path ||\n            this.basePath+'TFExt_ColsResizer/TFExt_ColsResizer.js';\n\n        this.gridColElms = [];\n\n        this.tf = tf;\n    }\n\n    /**\n     * Generates a grid with fixed headers\n     */\n    init(){\n        var tf = this.tf;\n        var f = tf.fObj;\n        var tbl = tf.tbl;\n\n        if(!tf.gridLayout){\n            return;\n        }\n\n        tf.isExternalFlt = true;\n\n        // default width of 100px if column widths not set\n        if(!tf.hasColWidth){\n            tf.colWidth = [];\n            for(var k=0; k<tf.nbCells; k++){\n                var colW,\n                    cell = tbl.rows[this.gridHeadRowIndex].cells[k];\n                if(cell.width !== ''){\n                    colW = cell.width;\n                } else if(cell.style.width !== ''){\n                    colW = parseInt(cell.style.width, 10);\n                } else {\n                    colW = this.gridDefaultColWidth;\n                }\n                tf.colWidth[k] = colW;\n            }\n            tf.hasColWidth = true;\n        }\n        tf.SetColWidths(this.gridHeadRowIndex);\n\n        var tblW;//initial table width\n        if(tbl.width !== ''){\n            tblW = tbl.width;\n        }\n        else if(tbl.style.width !== ''){\n            tblW = parseInt(tbl.style.width, 10);\n        } else {\n            tblW = tbl.clientWidth;\n        }\n\n        //Main container: it will contain all the elements\n        this.tblMainCont = Dom.create('div',['id', tf.prfxMainTblCont + tf.id]);\n        this.tblMainCont.className = this.gridMainContCssClass;\n        if(this.gridWidth){\n            this.tblMainCont.style.width = this.gridWidth;\n        }\n        tbl.parentNode.insertBefore(this.tblMainCont, tbl);\n\n        //Table container: div wrapping content table\n        this.tblCont = Dom.create('div',['id', tf.prfxTblCont + tf.id]);\n        this.tblCont.className = this.gridContCssClass;\n        if(this.gridWidth){\n            this.tblCont.style.width = this.gridWidth;\n        }\n        if(this.gridHeight){\n            this.tblCont.style.height = this.gridHeight;\n        }\n        tbl.parentNode.insertBefore(this.tblCont, tbl);\n        var t = tbl.parentNode.removeChild(tbl);\n        this.tblCont.appendChild(t);\n\n        //In case table width is expressed in %\n        if(tbl.style.width === ''){\n            tbl.style.width = (tf.__containsStr('%', tblW) ?\n                tbl.clientWidth : tblW) + 'px';\n        }\n\n        var d = this.tblCont.parentNode.removeChild(this.tblCont);\n        this.tblMainCont.appendChild(d);\n\n        //Headers table container: div wrapping headers table\n        this.headTblCont = Dom.create(\n            'div',['id', tf.prfxHeadTblCont + tf.id]);\n        this.headTblCont.className = this.gridHeadContCssClass;\n        if(this.gridWidth){\n            this.headTblCont.style.width = this.gridWidth;\n        }\n\n        //Headers table\n        this.headTbl = Dom.create('table', ['id', tf.prfxHeadTbl + tf.id]);\n        var tH = Dom.create('tHead'); //IE<7 needs it\n\n        //1st row should be headers row, ids are added if not set\n        //Those ids are used by the sort feature\n        var hRow = tbl.rows[this.gridHeadRowIndex];\n        var sortTriggers = [];\n        for(var n=0; n<tf.nbCells; n++){\n            var c = hRow.cells[n];\n            var thId = c.getAttribute('id');\n            if(!thId || thId===''){\n                thId = tf.prfxGridTh+n+'_'+tf.id;\n                c.setAttribute('id', thId);\n            }\n            sortTriggers.push(thId);\n        }\n\n        //Filters row is created\n        var filtersRow = Dom.create('tr');\n        if(this.gridEnableFilters && tf.fltGrid){\n            tf.externalFltTgtIds = [];\n            for(var j=0; j<tf.nbCells; j++){\n                var fltTdId = tf.prfxFlt+j+ tf.prfxGridFltTd +tf.id;\n                var cl = Dom.create(tf.fltCellTag, ['id', fltTdId]);\n                filtersRow.appendChild(cl);\n                tf.externalFltTgtIds[j] = fltTdId;\n            }\n        }\n        //Headers row are moved from content table to headers table\n        for(var i=0; i<this.gridHeadRows.length; i++){\n            var headRow = tbl.rows[this.gridHeadRows[0]];\n            tH.appendChild(headRow);\n        }\n        this.headTbl.appendChild(tH);\n        if(tf.filtersRowIndex === 0){\n            tH.insertBefore(filtersRow,hRow);\n        } else {\n            tH.appendChild(filtersRow);\n        }\n\n        this.headTblCont.appendChild(this.headTbl);\n        this.tblCont.parentNode.insertBefore(this.headTblCont, this.tblCont);\n\n        //THead needs to be removed in content table for sort feature\n        var thead = Dom.tag(tbl, 'thead');\n        if(thead.length>0){\n            tbl.removeChild(thead[0]);\n        }\n\n        //Headers table style\n        this.headTbl.style.width = tbl.style.width;\n        this.headTbl.style.tableLayout = 'fixed';\n        tbl.style.tableLayout = 'fixed';\n        this.headTbl.cellPadding = tbl.cellPadding;\n        this.headTbl.cellSpacing = tbl.cellSpacing;\n\n        //content table without headers needs col widths to be reset\n        tf.SetColWidths();\n\n        //Headers container width\n        this.headTblCont.style.width = this.tblCont.clientWidth+'px';\n\n        tbl.style.width = '';\n        // if(Helpers.isIE()){\n        //     this.headTbl.style.width = '';\n        // }\n\n        //scroll synchronisation\n        var o = this;\n\n        Event.add(this.tblCont, 'scroll', function(evt){\n            //this = scroll element\n            var scrollLeft = this.scrollLeft;\n            o.headTblCont.scrollLeft = scrollLeft;\n            //New pointerX calc taking into account scrollLeft\n            if(!o.isPointerXOverwritten){\n                try{\n                    o.Evt.pointerX = function(evt){\n                        var e = evt || global.event;\n                        var bdScrollLeft = tf_StandardBody().scrollLeft +\n                            scrollLeft;\n                        return (e.pageX + scrollLeft) ||\n                            (e.clientX + bdScrollLeft);\n                    };\n                    o.isPointerXOverwritten = true;\n                } catch(err) {\n                    o.isPointerXOverwritten = false;\n                }\n            }\n        });\n\n        //Sort is enabled if not specified in config object\n        if(f.sort !== false){\n            tf.sort = true;\n            tf.sortConfig.asyncSort = true;\n            tf.sortConfig.triggerIds = sortTriggers;\n        }\n\n        if(this.gridEnableColResizer){\n            if(!tf.hasExtensions){\n                tf.extensions = {\n                    name:['ColumnsResizer_'+tf.id],\n                    src:[this.gridColResizerPath],\n                    description:['Columns Resizing'],\n                    initialize:[function(o){\n                        o.SetColsResizer('ColumnsResizer_'+o.id);}]\n                };\n                tf.hasExtensions = true;\n            } else {\n                if(!tf.__containsStr(\n                    'colsresizer',\n                    Str.lower(tf.extensions.src.toString())) ){\n                    tf.extensions.name.push('ColumnsResizer_'+tf.id);\n                    tf.extensions.src.push(tf.gridColResizerPath);\n                    tf.extensions.description.push('Columns Resizing');\n                    tf.extensions.initialize.push(function(o){\n                        o.SetColsResizer('ColumnsResizer_'+o.id);});\n                }\n            }\n        }\n\n        //Default columns resizer properties for grid layout\n        f.col_resizer_cols_headers_table = this.headTbl.getAttribute('id');\n        f.col_resizer_cols_headers_index = this.gridHeadRowIndex;\n        f.col_resizer_width_adjustment = 0;\n        f.col_enable_text_ellipsis = false;\n\n        //Cols generation for all browsers excepted IE<=7\n        o.tblHasColTag = Dom.tag(tbl, 'col').length > 0 ? true : false;\n\n        // if(!Helpers.isIE()){\n            //Col elements are enough to keep column widths after sorting and\n            //filtering\n            var createColTags = function(o){\n                if(!o){\n                    return;\n                }\n                for(var k=(tf.nbCells-1); k>=0; k--){\n                    var col = Dom.create('col', ['id', tf.id+'_col_'+k]);\n                    tbl.firstChild.parentNode.insertBefore(col, tbl.firstChild);\n                    col.style.width = tf.colWidth[k];\n                    o.gridColElms[k] = col;\n                }\n                o.tblHasColTag = true;\n            };\n            if(!o.tblHasColTag){\n                createColTags(o);\n            } else {\n                var cols = Dom.tag(tbl, 'col');\n                for(var ii=0; ii<tf.nbCells; ii++){\n                    cols[ii].setAttribute('id', tf.id+'_col_'+ii);\n                    cols[ii].style.width = tf.colWidth[ii];\n                    o.gridColElms.push(cols[ii]);\n                }\n            }\n        // }\n\n        //IE <= 7 needs an additional row for widths as col element width is\n        //not enough...\n        // if(Helpers.isIE()){\n        //     var tbody = Dom.tag(tbl,'tbody'),\n        //         r;\n        //     if( tbody.length>0 ){\n        //         r = tbody[0].insertRow(0);\n        //     } else{\n        //         r = tbl.insertRow(0);\n        //     }\n        //     r.style.height = '0px';\n        //     for(var x=0; x<o.nbCells; x++){\n        //         var col = Dom.create('td', ['id', o.id+'_col_'+x]);\n        //         col.style.width = o.colWidth[x];\n        //         tbl.rows[1].cells[x].style.width = '';\n        //         r.appendChild(col);\n        //         o.gridColElms.push(col);\n        //     }\n        //     tf.hasGridWidthsRow = true;\n        //     //Data table row with widths expressed\n        //     o.leadColWidthsRow = tbl.rows[0];\n        //     o.leadColWidthsRow.setAttribute('validRow', 'false');\n\n        //     var beforeSortFn = Types.isFn(f.on_before_sort) ?\n        //         f.on_before_sort : null;\n        //     f.on_before_sort = function(o, colIndex){\n        //         o.leadColWidthsRow.setAttribute('validRow', 'false');\n        //         if(beforeSortFn){\n        //             beforeSortFn.call(null, o, colIndex);\n        //         }\n        //     };\n\n        //     var afterSortFn = Types.isFn(f.on_after_sort) ?\n        //         f.on_after_sort : null;\n        //     f.on_after_sort = function(o,colIndex){\n        //         if(o.leadColWidthsRow.rowIndex !== 0){\n        //             var r = o.leadColWidthsRow;\n        //             if(tbody.length>0){\n        //                 tbody[0].moveRow(o.leadColWidthsRow.rowIndex, 0);\n        //             } else {\n        //                 tbl.moveRow(o.leadColWidthsRow.rowIndex, 0);\n        //             }\n        //         }\n        //         if(afterSortFn){\n        //             afterSortFn.call(null, o, colIndex);\n        //         }\n        //     };\n        // }\n\n        var afterColResizedFn = Types.isFn(f.on_after_col_resized) ?\n            f.on_after_col_resized : null;\n        f.on_after_col_resized = function(o,colIndex){\n            if(!colIndex){\n                return;\n            }\n            var w = o.crWColsRow.cells[colIndex].style.width;\n            var col = o.gridColElms[colIndex];\n            col.style.width = w;\n\n            var thCW = o.crWColsRow.cells[colIndex].clientWidth;\n            var tdCW = o.crWRowDataTbl.cells[colIndex].clientWidth;\n\n            // if(Helpers.isIE()){\n            //     tbl.style.width = o.headTbl.clientWidth+'px';\n            // }\n\n            if(thCW != tdCW /*&& !Helpers.isIE()*/){\n                o.headTbl.style.width = tbl.clientWidth+'px';\n            }\n\n            if(afterColResizedFn){\n                afterColResizedFn.call(null,o,colIndex);\n            }\n        };\n\n        if(tbl.clientWidth !== this.headTbl.clientWidth){\n            tbl.style.width = this.headTbl.clientWidth+'px';\n        }\n\n        // Re-adjust reference row\n        //tf.refRow = Helpers.isIE() ? (tf.refRow+1) : 0;\n    }\n\n    /**\n     * Removes the grid layout\n     */\n    destroy(){\n        var tf = this.tf;\n        var tbl = tf.tbl;\n\n        if(!tf.gridLayout){\n            return;\n        }\n        var t = tbl.parentNode.removeChild(tbl);\n        this.tblMainCont.parentNode.insertBefore(t, this.tblMainCont);\n        this.tblMainCont.parentNode.removeChild(this.tblMainCont);\n\n        this.tblMainCont = null;\n        this.headTblCont = null;\n        this.headTbl = null;\n        this.tblCont = null;\n\n        tbl.outerHTML = tf.sourceTblHtml;\n        //needed to keep reference of table element\n        tbl = Dom.id(tf.id);\n    }\n}"]}