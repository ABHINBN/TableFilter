define(["exports", "module", "event", "dom", "string", "cookie", "types", "array", "helpers", "date", "sort", "modules/store", "modules/gridLayout", "modules/loader", "modules/highlightKeywords", "modules/popupFilter", "modules/dropdown", "modules/checkList", "modules/rowsCounter", "modules/statusBar", "modules/paging", "modules/clearButton", "modules/help", "modules/alternateRows", "modules/colOps"], function(exports, module, _event, _dom, _string, _cookie, _types, _array, _helpers, _date, _sort, _modulesStore, _modulesGridLayout, _modulesLoader, _modulesHighlightKeywords, _modulesPopupFilter, _modulesDropdown, _modulesCheckList, _modulesRowsCounter, _modulesStatusBar, _modulesPaging, _modulesClearButton, _modulesHelp, _modulesAlternateRows, _modulesColOps){"use strict";var _prototypeProperties=function(child, staticProps, instanceProps){if(staticProps)Object.defineProperties(child, staticProps);if(instanceProps)Object.defineProperties(child.prototype, instanceProps);};var _classCallCheck=function(instance, Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}};var evt=_event.Event;var dom=_dom.Dom;var str=_string.Str;var cookie=_cookie.Cookie;var types=_types.Types;var array=_array.Arr;var hlp=_helpers.Helpers;var dateHelper=_date.DateHelper;var Sort=_sort.Sort;var Store=_modulesStore.Store;var GridLayout=_modulesGridLayout.GridLayout;var Loader=_modulesLoader.Loader;var HighlightKeyword=_modulesHighlightKeywords.HighlightKeyword;var PopupFilter=_modulesPopupFilter.PopupFilter;var Dropdown=_modulesDropdown.Dropdown;var CheckList=_modulesCheckList.CheckList;var RowsCounter=_modulesRowsCounter.RowsCounter;var StatusBar=_modulesStatusBar.StatusBar;var Paging=_modulesPaging.Paging;var ClearButton=_modulesClearButton.ClearButton;var Help=_modulesHelp.Help;var AlternateRows=_modulesAlternateRows.AlternateRows;var ColOps=_modulesColOps.ColOps;var global=window, isValidDate=dateHelper.isValid, formatDate=dateHelper.format, doc=global.document;var TableFilter=(function(){function TableFilter(id){_classCallCheck(this, TableFilter);if(arguments.length === 0){return;}this.id = id;this.version = "3.0";this.year = new Date().getFullYear();this.tbl = dom.id(id);this.startRow = null;this.refRow = null;this.headersRow = null;this.cfg = {};this.nbFilterableRows = null;this.nbRows = null;this.nbCells = null;this._hasGrid = false;this.enableModules = false;if(!this.tbl || str.lower(this.tbl.nodeName) !== "table" || this.getRowsNb() === 0){throw new Error("Could not instantiate TF object: HTML table not found.");}if(arguments.length > 1){for(var i=0; i < arguments.length; i++) {var arg=arguments[i];var argtype=typeof arg;switch(str.lower(argtype)){case "number":this.startRow = arg;break;case "object":this.cfg = arg;break;}}}var f=this.cfg;this.refRow = this.startRow === null?2:this.startRow + 1;try{this.nbCells = this.getCellsNb(this.refRow);}catch(e) {this.nbCells = this.getCellsNb(0);}this.basePath = f.base_path !== undefined?f.base_path:"";this.fltTypeInp = "input";this.fltTypeSlc = "select";this.fltTypeMulti = "multiple";this.fltTypeCheckList = "checklist";this.fltTypeNone = "none";this.fltCol = [];for(var j=0; j < this.nbCells; j++) {var cfgCol=f["col_" + j];var col=!cfgCol?this.fltTypeInp:str.lower(cfgCol);this.fltCol.push(col);this["col" + j] = col;}this.publicMethods = f.public_methods !== undefined?f.public_methods:false;this.fltGrid = f.grid === false?false:true;this.gridLayout = f.grid_layout?true:false;this.sourceTblHtml = null;if(this.gridLayout){if(this.tbl.outerHTML === undefined){setOuterHtml();}this.sourceTblHtml = this.tbl.outerHTML;}this.filtersRowIndex = f.filters_row_index || 0;this.headersRow = f.headers_row_index || (this.filtersRowIndex === 0?1:0);if(this.gridLayout){if(this.headersRow > 1){this.filtersRowIndex = this.headersRow + 1;}else {this.filtersRowIndex = 1;this.headersRow = 0;}}this.fltCellTag = f.filters_cell_tag !== "th" || f.filters_cell_tag !== "td"?"td":f.filters_cell_tag;this.fltIds = [];this.fltElms = [];this.searchArgs = null;this.tblData = [];this.validRowsIndex = null;this.fltGridEl = null;this.isFirstLoad = true;this.infDiv = null;this.lDiv = null;this.rDiv = null;this.mDiv = null;this.contDiv = null;this.infDivCssClass = f.inf_div_css_class || "inf";this.lDivCssClass = f.left_div_css_class || "ldiv";this.rDivCssClass = f.right_div_css_class || "rdiv";this.mDivCssClass = f.middle_div_css_class || "mdiv";this.contDivCssClass = f.content_div_css_class || "cont";this.stylesheet = f.stylesheet || this.basePath + "filtergrid.css";this.stylesheetId = this.id + "_style";this.fltsRowCssClass = f.flts_row_css_class || "fltrow";this.enableIcons = f.enable_icons === false?false:true;this.alternateBgs = f.alternate_rows === true?true:false;this.hasColWidth = f.col_width === true?true:false;this.colWidth = this.hasColWidth?f.col_width:null;this.fixedHeaders = f.fixed_headers === true?true:false;this.tBodyH = !isNaN(f.tbody_height)?f.tbody_height:200;this.fltCssClass = f.flt_css_class || "flt";this.fltMultiCssClass = f.flt_multi_css_class || "flt_multi";this.fltSmallCssClass = f.flt_small_css_class || "flt_s";this.singleFltCssClass = f.single_flt_css_class || "single_flt";this.isStartBgAlternate = true;this.enterKey = f.enter_key === false?false:true;this.isModFilterFn = f.mod_filter_fn === true?true:false;this.modFilterFn = this.isModFilterFn?f.mod_filter_fn:null;this.onBeforeFilter = types.isFn(f.on_before_filter)?f.on_before_filter:null;this.onAfterFilter = types.isFn(f.on_after_filter)?f.on_after_filter:null;this.matchCase = f.match_case === true?true:false;this.exactMatch = f.exact_match === true?true:false;this.linkedFilters = f.linked_filters === true?true:false;this.disableExcludedOptions = f.disable_excluded_options === true?true:false;this.activeFlt = null;this.activeFilterId = null;this.hasColOperation = f.col_operation?true:false;this.colOperation = null;this.hasVisibleRows = f.rows_always_visible?true:false;this.visibleRows = this.hasVisibleRows?f.rows_always_visible:[];this.searchType = f.search_type || "include";this.isExternalFlt = f.external_flt_grid === true?true:false;this.externalFltTgtIds = f.external_flt_grid_ids || null;this.externalFltEls = [];this.execDelay = !isNaN(f.exec_delay)?parseInt(f.exec_delay, 10):100;this.onFiltersLoaded = types.isFn(f.on_filters_loaded)?f.on_filters_loaded:null;this.singleSearchFlt = f.single_search_filter === true?true:false;this.onRowValidated = types.isFn(f.on_row_validated)?f.on_row_validated:null;this.customCellDataCols = f.custom_cell_data_cols?f.custom_cell_data_cols:[];this.customCellData = types.isFn(f.custom_cell_data)?f.custom_cell_data:null;this.watermark = f.watermark || "";this.isWatermarkArray = types.isArray(this.watermark);this.toolBarTgtId = f.toolbar_target_id || null;this.helpInstructions = f.help_instructions || false;this.popUpFilters = f.popup_filters === true?true:false;this.markActiveColumns = f.mark_active_columns === true?true:false;this.activeColumnsCssClass = f.active_columns_css_class || "activeHeader";this.onBeforeActiveColumn = types.isFn(f.on_before_active_column)?f.on_before_active_column:null;this.onAfterActiveColumn = types.isFn(f.on_after_active_column)?f.on_after_active_column:null;this.displayAllText = f.display_all_text || "";this.enableEmptyOption = f.enable_empty_option === true?true:false;this.emptyText = f.empty_text || "(Empty)";this.enableNonEmptyOption = f.enable_non_empty_option === true?true:false;this.nonEmptyText = f.non_empty_text || "(Non empty)";this.onSlcChange = f.on_change === false?false:true;this.sortSlc = f.sort_select === false?false:true;this.isSortNumAsc = f.sort_num_asc === true?true:false;this.sortNumAsc = this.isSortNumAsc?f.sort_num_asc:null;this.isSortNumDesc = f.sort_num_desc === true?true:false;this.sortNumDesc = this.isSortNumDesc?f.sort_num_desc:null;this.fillSlcOnDemand = f.fill_slc_on_demand === true?true:false;this.hasCustomSlcOptions = types.isObj(f.custom_slc_options)?true:false;this.customSlcOptions = types.isArray(f.custom_slc_options)?f.custom_slc_options:null;this.rgxOperator = f.regexp_operator || "rgx:";this.emOperator = f.empty_operator || "[empty]";this.nmOperator = f.nonempty_operator || "[nonempty]";this.orOperator = f.or_operator || "||";this.anOperator = f.and_operator || "&&";this.grOperator = f.greater_operator || ">";this.lwOperator = f.lower_operator || "<";this.leOperator = f.lower_equal_operator || "<=";this.geOperator = f.greater_equal_operator || ">=";this.dfOperator = f.different_operator || "!";this.lkOperator = f.like_operator || "*";this.eqOperator = f.equal_operator || "=";this.stOperator = f.start_with_operator || "{";this.enOperator = f.end_with_operator || "}";this.curExp = f.cur_exp || "^[¥£€$]";this.separator = f.separator || ",";this.rowsCounter = f.rows_counter === true?true:false;this.statusBar = f.status_bar === true?true:false;this.loader = f.loader === true?true:false;this.displayBtn = f.btn === true?true:false;this.btnText = f.btn_text || (!this.enableIcons?"Go":"");this.btnCssClass = f.btn_css_class || (!this.enableIcons?"btnflt":"btnflt_icon");this.btnReset = f.btn_reset === true?true:false;this.btnResetCssClass = f.btn_reset_css_class || "reset";this.onBeforeReset = types.isFn(f.on_before_reset)?f.on_before_reset:null;this.onAfterReset = types.isFn(f.on_after_reset)?f.on_after_reset:null;this.paging = f.paging === true?true:false;this.nbVisibleRows = 0;this.nbHiddenRows = 0;this.sort = f.sort === true?true:false;this.isSortEnabled = false;this.sortConfig = f.sort_config || {};this.sortConfig.name = this.sortConfig.name !== undefined?f.sort_config.name:"sortabletable";this.sortConfig.src = this.sortConfig.src !== undefined?f.sort_config.src:this.basePath + "extensions/sortabletable/" + "sortabletable.js";this.sortConfig.adapterSrc = this.sortConfig.adapter_src !== undefined?f.sort_config.adapter_src:this.basePath + "extensions/sortabletable/adapterSortabletable.js";this.sortConfig.initialize = this.sortConfig.initialize !== undefined?f.sort_config.initialize:function(o){};this.sortConfig.sortTypes = types.isArray(this.sortConfig.sort_types)?f.sort_config.sort_types:[];this.sortConfig.sortCol = this.sortConfig.sort_col !== undefined?f.sort_config.sort_col:null;this.sortConfig.asyncSort = this.sortConfig.async_sort === true?true:false;this.sortConfig.triggerIds = types.isArray(this.sortConfig.sort_trigger_ids)?f.sort_config.sort_trigger_ids:[];this.selectable = f.selectable === true?true:false;this.editable = f.editable === true?true:false;this.ezEditTableConfig = f.ezEditTable_config || {};this.ezEditTableConfig.name = this.ezEditTableConfig.name !== undefined?f.ezEditTable_config.name:"ezedittable";this.ezEditTableConfig.src = this.ezEditTableConfig.src !== undefined?f.ezEditTable_config.src:this.basePath + "ezEditTable/ezEditTable.js";this.ezEditTableConfig.loadStylesheet = this.ezEditTableConfig.loadStylesheet === true?true:false;this.ezEditTableConfig.stylesheet = this.ezEditTableConfig.stylesheet || this.basePath + "ezEditTable/ezEditTable.css";this.ezEditTableConfig.stylesheetName = this.ezEditTableConfig.stylesheetName !== undefined?f.ezEditTable_config.stylesheetName:"ezEditTableCss";this.ezEditTableConfig.err = "Failed to instantiate EditTable " + "object.\n\"ezEditTable\" module may not be available.";this.onKeyUp = f.on_keyup === true?true:false;this.onKeyUpDelay = !isNaN(f.on_keyup_delay)?f.on_keyup_delay:900;this.isUserTyping = null;this.onKeyUpTimer = undefined;this.highlightKeywords = f.highlight_keywords === true?true:false;this.defaultDateType = f.default_date_type || "DMY";this.thousandsSeparator = f.thousands_separator || ",";this.decimalSeparator = f.decimal_separator || ".";this.hasColNbFormat = f.col_number_format === true?true:false;this.colNbFormat = types.isArray(this.hasColNbFormat)?f.col_number_format:null;this.hasColDateType = f.col_date_type === true?true:false;this.colDateType = types.isArray(this.hasColDateType)?f.col_date_type:null;this.msgFilter = f.msg_filter || "Filtering data...";this.msgPopulate = f.msg_populate || "Populating filter...";this.msgPopulateCheckList = f.msg_populate_checklist || "Populating list...";this.msgChangePage = f.msg_change_page || "Collecting paging data...";this.msgClear = f.msg_clear || "Clearing filters...";this.msgChangeResults = f.msg_change_results || "Changing results per page...";this.msgResetValues = f.msg_reset_grid_values || "Re-setting filters values...";this.msgResetPage = f.msg_reset_page || "Re-setting page...";this.msgResetPageLength = f.msg_reset_page_length || "Re-setting page length...";this.msgSort = f.msg_sort || "Sorting data...";this.msgLoadExtensions = f.msg_load_extensions || "Loading extensions...";this.msgLoadThemes = f.msg_load_themes || "Loading theme(s)...";this.prfxTf = "TF";this.prfxFlt = "flt";this.prfxValButton = "btn";this.prfxInfDiv = "inf_";this.prfxLDiv = "ldiv_";this.prfxRDiv = "rdiv_";this.prfxMDiv = "mdiv_";this.prfxContentDiv = "cont_";this.prfxCheckListDiv = "chkdiv_";this.prfxSlcPages = "slcPages_";this.prfxSlcResults = "slcResults_";this.prfxSlcResultsTxt = "slcResultsTxt_";this.prfxBtnNextSpan = "btnNextSpan_";this.prfxBtnPrevSpan = "btnPrevSpan_";this.prfxBtnLastSpan = "btnLastSpan_";this.prfxBtnFirstSpan = "btnFirstSpan_";this.prfxBtnNext = "btnNext_";this.prfxBtnPrev = "btnPrev_";this.prfxBtnLast = "btnLast_";this.prfxBtnFirst = "btnFirst_";this.prfxPgSpan = "pgspan_";this.prfxPgBeforeSpan = "pgbeforespan_";this.prfxPgAfterSpan = "pgafterspan_";this.prfxCounter = "counter_";this.prfxTotRows = "totrows_span_";this.prfxTotRowsTxt = "totRowsTextSpan_";this.prfxResetSpan = "resetspan_";this.prfxLoader = "load_";this.prfxStatus = "status_";this.prfxStatusSpan = "statusSpan_";this.prfxStatusTxt = "statusText_";this.prfxCookieFltsValues = "tf_flts_";this.prfxCookiePageNb = "tf_pgnb_";this.prfxCookiePageLen = "tf_pglen_";this.prfxMainTblCont = "gridCont_";this.prfxTblCont = "tblCont_";this.prfxHeadTblCont = "tblHeadCont_";this.prfxHeadTbl = "tblHead_";this.prfxGridFltTd = "_td_";this.prfxGridTh = "tblHeadTh_";this.prfxHelpSpan = "helpSpan_";this.prfxHelpDiv = "helpDiv_";this.prfxPopUpSpan = "popUpSpan_";this.prfxPopUpDiv = "popUpDiv_";this.hasStoredValues = false;this.rememberGridValues = f.remember_grid_values === true?true:false;this.fltsValuesCookie = this.prfxCookieFltsValues + this.id;this.rememberPageNb = this.paging && f.remember_page_number?true:false;this.pgNbCookie = this.prfxCookiePageNb + this.id;this.rememberPageLen = this.paging && f.remember_page_length?true:false;this.pgLenCookie = this.prfxCookiePageLen + this.id;this.hasExtensions = f.extensions === true?true:false;this.extensions = this.hasExtensions?f.extensions:null;this.enableDefaultTheme = f.enable_default_theme === true?true:false;this.hasThemes = f.enable_default_theme || f.themes && types.isObj(f.themes)?true:false;this.themes = this.hasThemes?f.themes:null;this.themesPath = f.themes_path || this.basePath + "TF_Themes/";this.Cpt = {loader:null, alternateRows:null, colOps:null, rowsCounter:null, gridLayout:null, store:null, highlightKeywords:null, paging:null, checkList:null, dropdown:null, popupFilter:null, clearButton:null, help:null, statusBar:null};this.Extensions = {sort:null};var o=this;this.Evt = {name:{filter:"Filter", dropdown:"dropdown", checklist:"checkList", changepage:"changePage", clear:"Clear", changeresultsperpage:"changeResults", resetvalues:"ResetValues", resetpage:"resetPage", resetpagelength:"resetPageLength", sort:"Sort", loadextensions:"LoadExtensions", loadthemes:"LoadThemes"}, getKeyCode:function getKeyCode(evt){return evt.charCode?evt.charCode:evt.keyCode?evt.keyCode:evt.which?evt.which:0;}, _DetectKey:function _DetectKey(e){if(!o.enterKey){return;}var _evt=e || global.event;if(_evt){var key=o.Evt.getKeyCode(_evt);if(key === 13){o._filter();evt.cancel(_evt);evt.stop(_evt);}else {o.isUserTyping = true;global.clearInterval(o.onKeyUpTimer);o.onKeyUpTimer = undefined;}}}, _OnKeyUp:function _OnKeyUp(e){if(!o.onKeyUp){return;}var _evt=e || global.event;var key=o.Evt.getKeyCode(_evt);o.isUserTyping = false;function filter(){global.clearInterval(o.onKeyUpTimer);o.onKeyUpTimer = undefined;if(!o.isUserTyping){o.filter();o.isUserTyping = null;}}if(key !== 13 && key !== 9 && key !== 27 && key !== 38 && key !== 40){if(o.onKeyUpTimer === undefined){o.onKeyUpTimer = global.setInterval(filter, o.onKeyUpDelay);}}else {global.clearInterval(o.onKeyUpTimer);o.onKeyUpTimer = undefined;}}, _OnKeyDown:function _OnKeyDown(e){if(!o.onKeyUp){return;}o.isUserTyping = true;}, _OnInpBlur:function _OnInpBlur(e){if(o.onKeyUp){o.isUserTyping = false;global.clearInterval(o.onKeyUpTimer);}if(o.ezEditTable){if(o.editable){o.ezEditTable.Editable.Set();}if(o.selectable){o.ezEditTable.Selection.Set();}}}, _OnInpFocus:function _OnInpFocus(e){var _evt=e || global.event;o.activeFilterId = this.getAttribute("id");o.activeFlt = dom.id(o.activeFilterId);if(o.popUpFilters){evt.cancel(_evt);evt.stop(_evt);}if(o.ezEditTable){if(o.editable){o.ezEditTable.Editable.Remove();}if(o.selectable){o.ezEditTable.Selection.Remove();}}}, _OnSlcFocus:function _OnSlcFocus(e){var _evt=e || global.event;o.activeFilterId = this.getAttribute("id");o.activeFlt = dom.id(o.activeFilterId);if(o.fillSlcOnDemand && this.getAttribute("filled") === "0"){var ct=this.getAttribute("ct");o.Cpt.dropdown._build(ct);}if(o.popUpFilters){evt.cancel(_evt);evt.stop(_evt);}}, _OnSlcChange:function _OnSlcChange(e){if(!o.activeFlt){return;}var colIndex=o.activeFlt.getAttribute("colIndex");var _evt=e || global.event;if(o.popUpFilters){evt.stop(_evt);}if(o.onSlcChange){o.filter();}}, _OnSlcBlur:function _OnSlcBlur(e){}, _OnCheckListClick:function _OnCheckListClick(){if(o.fillSlcOnDemand && this.getAttribute("filled") === "0"){var ct=this.getAttribute("ct");o.Cpt.checkList._build(ct);o.Cpt.checkList.checkListDiv[ct].onclick = null;o.Cpt.checkList.checkListDiv[ct].title = "";}}, _OnCheckListFocus:function _OnCheckListFocus(e){o.activeFilterId = this.firstChild.getAttribute("id");o.activeFlt = dom.id(o.activeFilterId);}, _OnCheckListBlur:function _OnCheckListBlur(e){}, _OnBtnClick:function _OnBtnClick(){o.filter();}, _OnSlcPagesChangeEvt:null, _EnableSlc:function _EnableSlc(){this.firstChild.disabled = false;this.firstChild.focus();this.onclick = null;}, _Paging:{nextEvt:null, prevEvt:null, lastEvt:null, firstEvt:null}};}_prototypeProperties(TableFilter, null, {init:{value:function init(){if(this._hasGrid){return;}if(!this.tbl){this.tbl = dom.id(this.id);}if(this.gridLayout){this.refRow = this.startRow === null?0:this.startRow;}if(this.popUpFilters && (this.filtersRowIndex === 0 && this.headersRow === 1 || this.gridLayout)){this.headersRow = 0;}var f=this.cfg, n=this.singleSearchFlt?1:this.nbCells, inpclass;if(window["tf_" + this.id] === undefined){window["tf_" + this.id] = this;}this.includeFile(this.stylesheetId, this.stylesheet, null, "link");if(this.hasThemes){this._LoadThemes();}if(this.rememberGridValues || this.rememberPageNb || this.rememberPageLen){this.Cpt.store = new Store(this);}if(this.gridLayout){this.Cpt.gridLayout = new GridLayout(this);this.Cpt.gridLayout.init();}if(this.loader){if(!this.Cpt.loader){this.Cpt.loader = new Loader(this);}}if(this.highlightKeywords){this.Cpt.highlightKeyword = new HighlightKeyword(this);}if(this.popUpFilters){if(!this.Cpt.popupFilter){this.Cpt.popupFilter = new PopupFilter(this);}this.Cpt.popupFilter.init();}if(!this.fltGrid){this.refRow = this.refRow - 1;if(this.gridLayout){this.refRow = 0;}this.nbFilterableRows = this.getRowsNb();this.nbVisibleRows = this.nbFilterableRows;this.nbRows = this.nbFilterableRows + this.refRow;}else {if(this.isFirstLoad){var fltrow;if(!this.gridLayout){var thead=dom.tag(this.tbl, "thead");if(thead.length > 0){fltrow = thead[0].insertRow(this.filtersRowIndex);}else {fltrow = this.tbl.insertRow(this.filtersRowIndex);}if(this.headersRow > 1 && this.filtersRowIndex <= this.headersRow && !this.popUpFilters){this.headersRow++;}if(this.popUpFilters){this.headersRow++;}fltrow.className = this.fltsRowCssClass;if(this.isExternalFlt && (!this.gridLayout || this.popUpFilters)){fltrow.style.display = "none";}}this.nbFilterableRows = this.getRowsNb();this.nbVisibleRows = this.nbFilterableRows;this.nbRows = this.tbl.rows.length;for(var i=0; i < n; i++) {if(this.popUpFilters){this.Cpt.popupFilter.build(i);}var fltcell=dom.create(this.fltCellTag), col=this["col" + i], externalFltTgtId=this.isExternalFlt && this.externalFltTgtIds?this.externalFltTgtIds[i]:null;if(this.singleSearchFlt){fltcell.colSpan = this.nbCells;}if(!this.gridLayout){fltrow.appendChild(fltcell);}inpclass = i == n - 1 && this.displayBtn?this.fltSmallCssClass:this.fltCssClass;if(col === undefined){col = f["col_" + i] === undefined?this.fltTypeInp:str.lower(f["col_" + i]);}if(this.singleSearchFlt){col = this.fltTypeInp;inpclass = this.singleFltCssClass;}if(col === this.fltTypeSlc || col === this.fltTypeMulti){if(!this.Cpt.dropdown){this.Cpt.dropdown = new Dropdown(this);}var dropdown=this.Cpt.dropdown;var slc=dom.create(this.fltTypeSlc, ["id", this.prfxFlt + i + "_" + this.id], ["ct", i], ["filled", "0"]);if(col === this.fltTypeMulti){slc.multiple = this.fltTypeMulti;slc.title = dropdown.multipleSlcTooltip;}slc.className = str.lower(col) === this.fltTypeSlc?inpclass:this.fltMultiCssClass;if(externalFltTgtId){dom.id(externalFltTgtId).appendChild(slc);this.externalFltEls.push(slc);}else {fltcell.appendChild(slc);}this.fltIds.push(this.prfxFlt + i + "_" + this.id);if(!this.fillSlcOnDemand){dropdown._build(i);}evt.add(slc, "keypress", this.Evt._DetectKey);evt.add(slc, "change", this.Evt._OnSlcChange);evt.add(slc, "focus", this.Evt._OnSlcFocus);evt.add(slc, "blur", this.Evt._OnSlcBlur);if(this.fillSlcOnDemand){var opt0=dom.createOpt(this.displayAllText, "");slc.appendChild(opt0);}}else if(col === this.fltTypeCheckList){if(!this.Cpt.checkList){this.Cpt.checkList = new CheckList(this);}var divCont=dom.create("div", ["id", this.prfxCheckListDiv + i + "_" + this.id], ["ct", i], ["filled", "0"]);divCont.className = this.Cpt.checkList.checkListDivCssClass;if(externalFltTgtId){dom.id(externalFltTgtId).appendChild(divCont);this.externalFltEls.push(divCont);}else {fltcell.appendChild(divCont);}this.Cpt.checkList.checkListDiv[i] = divCont;this.fltIds.push(this.prfxFlt + i + "_" + this.id);if(!this.fillSlcOnDemand){this.Cpt.checkList._build(i);}if(this.fillSlcOnDemand){evt.add(divCont, "click", this.Evt._OnCheckListClick);divCont.appendChild(dom.text(this.Cpt.checkList.activateCheckListTxt));}evt.add(divCont, "click", this.Evt._OnCheckListFocus);}else {var inptype=col === this.fltTypeInp?"text":"hidden";var inp=dom.create(this.fltTypeInp, ["id", this.prfxFlt + i + "_" + this.id], ["type", inptype], ["ct", i]);if(inptype !== "hidden" && this.watermark){inp.setAttribute("placeholder", this.isWatermarkArray?this.watermark[i]:this.watermark);}inp.className = inpclass;inp.onfocus = this.Evt._OnInpFocus;if(externalFltTgtId){dom.id(externalFltTgtId).appendChild(inp);this.externalFltEls.push(inp);}else {fltcell.appendChild(inp);}this.fltIds.push(this.prfxFlt + i + "_" + this.id);inp.onkeypress = this.Evt._DetectKey;inp.onkeydown = this.Evt._OnKeyDown;inp.onkeyup = this.Evt._OnKeyUp;inp.onblur = this.Evt._OnInpBlur;if(this.rememberGridValues){var flts_values=this.Cpt.store.getFilterValues(this.fltsValuesCookie);if(flts_values[i] != " "){this.setFilterValue(i, flts_values[i], false);}}}if(i == n - 1 && this.displayBtn){var btn=dom.create(this.fltTypeInp, ["id", this.prfxValButton + i + "_" + this.id], ["type", "button"], ["value", this.btnText]);btn.className = this.btnCssClass;if(externalFltTgtId){dom.id(externalFltTgtId).appendChild(btn);}else {fltcell.appendChild(btn);}btn.onclick = this.Evt._OnBtnClick;}}}else {this._resetGrid();}}if(this.rowsCounter){this.Cpt.rowsCounter = new RowsCounter(this);this.Cpt.rowsCounter.init();}if(this.statusBar){this.Cpt.statusBar = new StatusBar(this);this.Cpt.statusBar.init();}if(this.paging){this.Cpt.paging = new Paging(this);this.Cpt.paging.init();}if(this.btnReset){this.Cpt.clearButton = new ClearButton(this);this.Cpt.clearButton.init();}if(this.helpInstructions){this.Cpt.help = new Help(this);this.Cpt.help.init();}if(this.hasColWidth && !this.gridLayout){this.setColWidths();}if(this.alternateBgs){this.Cpt.alternateRows = new AlternateRows(this);this.Cpt.alternateRows.init();}if(this.hasColOperation){this.Cpt.colOps = new ColOps(this);this.Cpt.colOps.calc();}if(this.sort){this.setSort();}if(this.selectable || this.editable){this.SetEditable();}this.isFirstLoad = false;this._hasGrid = true;if(this.rememberGridValues || this.rememberPageLen || this.rememberPageNb){this.resetValues();}if(!this.gridLayout){dom.addClass(this.tbl, this.prfxTf);}if(this.loader){this.Cpt.loader.show("none");}if(this.hasExtensions){this.LoadExtensions();}if(this.onFiltersLoaded){this.onFiltersLoaded.call(null, this);}}, writable:true, configurable:true}, EvtManager:{value:function EvtManager(evt, s){var o=this;var slcIndex=s && s.slcIndex !== undefined?s.slcIndex:null;var slcExternal=s && s.slcExternal !== undefined?s.slcExternal:false;var slcId=s && s.slcId !== undefined?s.slcId:null;var pgIndex=s && s.pgIndex !== undefined?s.pgIndex:null;function efx(){if(!evt){return;}switch(evt){case o.Evt.name.filter:if(o.isModFilterFn){o.modFilterFn.call(null, o);}else {o._filter();}break;case o.Evt.name.dropdown:if(o.linkedFilters){o.Cpt.dropdown._build(slcIndex, true);}else {o.Cpt.dropdown._build(slcIndex, false, slcExternal, slcId);}break;case o.Evt.name.checklist:o.Cpt.checkList._build(slcIndex, slcExternal, slcId);break;case o.Evt.name.changepage:o.Cpt.paging._changePage(pgIndex);break;case o.Evt.name.clear:o._clearFilters();o._filter();break;case o.Evt.name.changeresultsperpage:o.Cpt.paging._changeResultsPerPage();break;case o.Evt.name.resetvalues:o._resetValues();o._filter();break;case o.Evt.name.resetpage:o.Cpt.paging._resetPage(o.pgNbCookie);break;case o.Evt.name.resetpagelength:o.Cpt.paging._resetPageLength(o.pgLenCookie);break;case o.Evt.name.sort:void 0;break;case o.Evt.name.loadextensions:o._LoadExtensions();break;case o.Evt.name.loadthemes:o._LoadThemes();break;default:o["_" + evt].call(null, o, s);break;}if(o.statusBar){o.Cpt.statusBar.message("");}if(o.loader){o.Cpt.loader.show("none");}}if(this.loader || this.statusBar){try{this.Cpt.loader.show("");this.Cpt.statusBar.message(this["msg" + evt]);}catch(e) {}global.setTimeout(efx, this.execDelay);}else {efx();}}, writable:true, configurable:true}, ImportModule:{value:function ImportModule(module){if(!module.path || !module.name){return;}this.includeFile(module.name, module.path, module.init);}, writable:true, configurable:true}, LoadExtensions:{value:function LoadExtensions(){if(!this.Ext){var o=this;this.Ext = {list:{}, add:function add(extName, extDesc, extPath, extCallBack){var file=extPath.split("/")[extPath.split("/").length - 1], re=new RegExp(file), path=extPath.replace(re, "");o.Ext.list[extName] = {name:extName, description:extDesc, file:file, path:path, callback:extCallBack};}};}this.EvtManager(this.Evt.name.loadextensions);}, writable:true, configurable:true}, _LoadExtensions:{value:function _LoadExtensions(){if(!this.hasExtensions || !types.isArray(this.extensions.name) || !types.isArray(this.extensions.src)){return;}var ext=this.extensions;for(var e=0; e < ext.name.length; e++) {var extPath=ext.src[e], extName=ext.name[e], extInit=ext.initialize && ext.initialize[e]?ext.initialize[e]:null, extDesc=ext.description && ext.description[e]?ext.description[e]:null;this.Ext.add(extName, extDesc, extPath, extInit);if(this.isImported(extPath)){extInit.call(null, this);}else {this.includeFile(extName, extPath, extInit);}}}, writable:true, configurable:true}, LoadThemes:{value:function LoadThemes(){this.EvtManager(this.Evt.name.loadthemes);}, writable:true, configurable:true}, _LoadThemes:{value:function _LoadThemes(){if(!this.hasThemes){return;}if(!this.Thm){var o=this;this.Thm = {list:{}, add:function add(thmName, thmDesc, thmPath, thmCallBack){var file=thmPath.split("/")[thmPath.split("/").length - 1], re=new RegExp(file), path=thmPath.replace(re, "");o.Thm.list[thmName] = {name:thmName, description:thmDesc, file:file, path:path, callback:thmCallBack};}};}if(this.enableDefaultTheme){this.themes = {name:["DefaultTheme"], src:[this.themesPath + "Default/TF_Default.css"], description:["Default Theme"]};this.Thm.add("DefaultTheme", this.themesPath + "Default/TF_Default.css", "Default Theme");}if(types.isArray(this.themes.name) && types.isArray(this.themes.src)){var thm=this.themes;for(var i=0; i < thm.name.length; i++) {var thmPath=thm.src[i], thmName=thm.name[i], thmInit=thm.initialize && thm.initialize[i]?thm.initialize[i]:null, thmDesc=thm.description && thm.description[i]?thm.description[i]:null;this.Thm.add(thmName, thmDesc, thmPath, thmInit);if(!this.isImported(thmPath, "link")){this.includeFile(thmName, thmPath, null, "link");}if(types.isFn(thmInit)){thmInit.call(null, this);}}}this.btnResetText = null;this.btnResetHtml = "<input type=\"button\" value=\"\" class=\"" + this.btnResetCssClass + "\" title=\"Clear filters\" />";this.btnPrevPageHtml = "<input type=\"button\" value=\"\" class=\"" + this.btnPageCssClass + " previousPage\" title=\"Previous page\" />";this.btnNextPageHtml = "<input type=\"button\" value=\"\" class=\"" + this.btnPageCssClass + " nextPage\" title=\"Next page\" />";this.btnFirstPageHtml = "<input type=\"button\" value=\"\" class=\"" + this.btnPageCssClass + " firstPage\" title=\"First page\" />";this.btnLastPageHtml = "<input type=\"button\" value=\"\" class=\"" + this.btnPageCssClass + " lastPage\" title=\"Last page\" />";this.loader = true;this.loaderHtml = "<div class=\"defaultLoader\"></div>";this.loaderText = null;}, writable:true, configurable:true}, remove:{value:function remove(){if(this.fltGrid && this._hasGrid){var rows=this.tbl.rows;if(this.paging){this.Cpt.paging.destroy();}if(this.statusBar){this.Cpt.statusBar.destroy();}if(this.rowsCounter){this.Cpt.rowsCounter.destroy();}if(this.btnReset){this.Cpt.clearButton.destroy();}if(this.helpInstructions){this.Cpt.help.destroy();}if(this.isExternalFlt && !this.popUpFilters){this.removeExternalFlts();}if(this.infDiv){this.removeToolbar();}if(this.highlightKeywords){this.Cpt.highlightKeyword.unhighlightAll();}if(this.sort){this.RemoveSort();}if(this.loader){this.Cpt.loader.remove();}if(this.popUpFilters){this.Cpt.popupFilter.destroy();}if(this.markActiveColumns){this.clearActiveColumns();}if(this.editable || this.selectable){this.RemoveEditable();}for(var j=this.refRow; j < this.nbRows; j++) {rows[j].style.display = "";try{if(rows[j].hasAttribute("validRow")){rows[j].removeAttribute("validRow");}}catch(e) {var row=rows[j];var attribs=row.attributes;for(var x=0; x < attribs.length; x++) {if(str.lower(attribs.nodeName) === "validrow"){row.removeAttribute("validRow");}}}if(this.alternateBgs){this.Cpt.alternateRows.removeRowBg(j);}}if(this.fltGrid && !this.gridLayout){this.fltGridEl = rows[this.filtersRowIndex];this.tbl.deleteRow(this.filtersRowIndex);}if(this.gridLayout){this.Cpt.gridLayout.destroy();}dom.removeClass(this.tbl, this.prfxTf);this.activeFlt = null;this.isStartBgAlternate = true;this._hasGrid = false;this.tbl = null;}}, writable:true, configurable:true}, setToolbar:{value:function setToolbar(){if(this.infDiv !== null){return;}var infdiv=dom.create("div", ["id", this.prfxInfDiv + this.id]);infdiv.className = this.infDivCssClass;if(this.toolBarTgtId){dom.id(this.toolBarTgtId).appendChild(infdiv);}else if(this.gridLayout){this.Cpt.gridLayout.tblMainCont.appendChild(infdiv);infdiv.className = this.gridInfDivCssClass;}else {this.tbl.parentNode.insertBefore(infdiv, this.tbl);}this.infDiv = dom.id(this.prfxInfDiv + this.id);var ldiv=dom.create("div", ["id", this.prfxLDiv + this.id]);ldiv.className = this.lDivCssClass;infdiv.appendChild(ldiv);this.lDiv = dom.id(this.prfxLDiv + this.id);var rdiv=dom.create("div", ["id", this.prfxRDiv + this.id]);rdiv.className = this.rDivCssClass;infdiv.appendChild(rdiv);this.rDiv = dom.id(this.prfxRDiv + this.id);var mdiv=dom.create("div", ["id", this.prfxMDiv + this.id]);mdiv.className = this.mDivCssClass;infdiv.appendChild(mdiv);this.mDiv = dom.id(this.prfxMDiv + this.id);if(!this.helpInstructions){if(!this.Cpt.help){this.Cpt.help = new Help(this);}this.Cpt.help.init();}}, writable:true, configurable:true}, removeToolbar:{value:function removeToolbar(){if(!this.infDiv){return;}this.infDiv.parentNode.removeChild(this.infDiv);this.infDiv = null;}, writable:true, configurable:true}, removeExternalFlts:{value:function removeExternalFlts(){if(!this.isExternalFlt && !this.externalFltTgtIds){return;}for(var ct=0; ct < this.externalFltTgtIds.length; ct++) {var externalFltTgtId=this.externalFltTgtIds[ct], externalFlt=dom.id(externalFltTgtId);if(externalFlt){externalFlt.innerHTML = "";}}}, writable:true, configurable:true}, setSort:{value:function setSort(){var fn=this.Evt._EnableSort, sortConfig=this.sortConfig;if(!types.isFn(fn)){var o=this;this.Evt._EnableSort = function(){if(o.isSortEnabled && !o.gridLayout){return;}var AdapterSortableTable=require(["extensions/sortabletable/adapterSortabletable"], function(adapterSortabletable){o.Extensions.sort = new adapterSortabletable(o);o.Extensions.sort.init();});};}if(this.isImported(this.sortConfig.src)){this.Evt._EnableSort();}else {this.includeFile(sortConfig.name, sortConfig.src, this.Evt._EnableSort);}}, writable:true, configurable:true}, removeSort:{value:function removeSort(){this.sort = false;}, writable:true, configurable:true}, performSort:{value:function performSort(){this.EvtManager(this.Evt.name.sort);}, writable:true, configurable:true}, SetEditable:{value:function SetEditable(){var ezEditConfig=this.ezEditTableConfig;if(this.isImported(ezEditConfig.src)){this._EnableEditable();}else {this.includeFile(ezEditConfig.name, ezEditConfig.src, this._EnableEditable);}if(ezEditConfig.loadStylesheet && !this.isImported(ezEditConfig.stylesheet, "link")){this.includeFile(ezEditConfig.stylesheetName, ezEditConfig.stylesheet, null, "link");}}, writable:true, configurable:true}, RemoveEditable:{value:function RemoveEditable(){var ezEditTable=this.ezEditTable;if(ezEditTable){if(this.selectable){ezEditTable.Selection.ClearSelections();ezEditTable.Selection.Remove();}if(this.editable){ezEditTable.Editable.Remove();}}}, writable:true, configurable:true}, ResetEditable:{value:function ResetEditable(){var ezEditTable=this.ezEditTable;if(ezEditTable){if(this.selectable){ezEditTable.Selection.Set();}if(this.editable){ezEditTable.Editable.Set();}}}, writable:true, configurable:true}, _EnableEditable:{value:function _EnableEditable(o){if(!o){o = this;}var startRow, ezEditConfig=o.ezEditTableConfig, thead=dom.tag(o.tbl, "thead");if(thead.length > 0 && !ezEditConfig.startRow){startRow = undefined;}else {startRow = ezEditConfig.startRow || o.refRow;}ezEditConfig.scroll_into_view = ezEditConfig.scroll_into_view === false?false:true;ezEditConfig.base_path = ezEditConfig.base_path || o.basePath + "ezEditTable/";ezEditConfig.editable = o.editable = o.cfg.editable;ezEditConfig.selection = o.selectable = o.cfg.selectable;if(o.selectable){ezEditConfig.default_selection = ezEditConfig.default_selection || "row";}ezEditConfig.active_cell_css = ezEditConfig.active_cell_css || "ezETSelectedCell";o._lastValidRowIndex = 0;o._lastRowIndex = 0;if(o.selectable){var onAfterSelection=function onAfterSelection(et, selectedElm, e){if(!o.validRowsIndex){return;}var validIndexes=o.validRowsIndex, validIdxLen=validIndexes.length, row=et.defaultSelection !== "row"?selectedElm.parentNode:selectedElm, cell=selectedElm.nodeName === "TD"?selectedElm:null, keyCode=e !== undefined?et.Event.GetKey(e):0, isRowValid=array.has(validIndexes, row.rowIndex), nextRowIndex, d=keyCode === 34 || keyCode === 33?o.pagingLength || et.nbRowsPerPage:1;if(!isRowValid){if(row.rowIndex > o._lastRowIndex){if(row.rowIndex >= validIndexes[validIdxLen - 1]){nextRowIndex = validIndexes[validIdxLen - 1];}else {var calcRowIndex=o._lastValidRowIndex + d;if(calcRowIndex > validIdxLen - 1){nextRowIndex = validIndexes[validIdxLen - 1];}else {nextRowIndex = validIndexes[calcRowIndex];}}}else {if(row.rowIndex <= validIndexes[0]){nextRowIndex = validIndexes[0];}else {var v=validIndexes[o._lastValidRowIndex - d];nextRowIndex = v?v:validIndexes[0];}}o._lastRowIndex = row.rowIndex;DoSelection(nextRowIndex);}else {if(keyCode !== 34 && keyCode !== 33){o._lastValidRowIndex = array.indexByValue(validIndexes, row.rowIndex);o._lastRowIndex = row.rowIndex;}else {if(keyCode === 34){if(o._lastValidRowIndex + d <= validIdxLen - 1){nextRowIndex = validIndexes[o._lastValidRowIndex + d];}else {nextRowIndex = [validIdxLen - 1];}}else {if(o._lastValidRowIndex - d <= validIndexes[0]){nextRowIndex = validIndexes[0];}else {nextRowIndex = validIndexes[o._lastValidRowIndex - d];}}o._lastRowIndex = nextRowIndex;o._lastValidRowIndex = array.indexByValue(validIndexes, nextRowIndex);DoSelection(nextRowIndex);}}var DoSelection=function DoSelection(nextRowIndex){if(et.defaultSelection === "row"){et.Selection.SelectRowByIndex(nextRowIndex);}else {et.ClearSelections();var cellIndex=selectedElm.cellIndex, row=o.tbl.rows[nextRowIndex];if(et.defaultSelection === "both"){et.Selection.SelectRowByIndex(nextRowIndex);}if(row){et.Selection.SelectCell(row.cells[cellIndex]);}}if(o.validRowsIndex.length !== o.getRowsNb()){var r=o.tbl.rows[nextRowIndex];if(r){r.scrollIntoView(false);}if(cell){if(cell.cellIndex === o.getCellsNb() - 1 && o.gridLayout){o.tblCont.scrollLeft = 100000000;}else if(cell.cellIndex === 0 && o.gridLayout){o.tblCont.scrollLeft = 0;}else {cell.scrollIntoView(false);}}}};};var onBeforeSelection=function onBeforeSelection(et, selectedElm, e){var row=et.defaultSelection !== "row"?selectedElm.parentNode:selectedElm;if(o.paging){if(o.nbPages > 1){et.nbRowsPerPage = o.pagingLength;var validIndexes=o.validRowsIndex, validIdxLen=validIndexes.length, pagingEndRow=parseInt(o.startPagingRow, 10) + parseInt(o.pagingLength, 10);var rowIndex=row.rowIndex;if(rowIndex === validIndexes[validIdxLen - 1] && o.currentPageNb != o.nbPages){o.Cpt.paging.setPage("last");}else if(rowIndex == validIndexes[0] && o.currentPageNb !== 1){o.Cpt.paging.setPage("first");}else if(rowIndex > validIndexes[pagingEndRow - 1] && rowIndex < validIndexes[validIdxLen - 1]){o.Cpt.paging.setPage("next");}else if(rowIndex < validIndexes[o.startPagingRow] && rowIndex > validIndexes[0]){o.Cpt.paging.setPage("previous");}}}};if(o.paging){o.onAfterChangePage = function(tf, i){var et=tf.ezEditTable;var row=et.Selection.GetActiveRow();if(row){row.scrollIntoView(false);}var cell=et.Selection.GetActiveCell();if(cell){cell.scrollIntoView(false);}};}if(ezEditConfig.default_selection === "row"){var fnB=ezEditConfig.on_before_selected_row;ezEditConfig.on_before_selected_row = function(){onBeforeSelection(arguments[0], arguments[1], arguments[2]);if(fnB){fnB.call(null, arguments[0], arguments[1], arguments[2]);}};var fnA=ezEditConfig.on_after_selected_row;ezEditConfig.on_after_selected_row = function(){onAfterSelection(arguments[0], arguments[1], arguments[2]);if(fnA){fnA.call(null, arguments[0], arguments[1], arguments[2]);}};}else {var fnD=ezEditConfig.on_before_selected_cell;ezEditConfig.on_before_selected_cell = function(){onBeforeSelection(arguments[0], arguments[1], arguments[2]);if(fnD){fnD.call(null, arguments[0], arguments[1], arguments[2]);}};var fnC=ezEditConfig.on_after_selected_cell;ezEditConfig.on_after_selected_cell = function(){onAfterSelection(arguments[0], arguments[1], arguments[2]);if(fnC){fnC.call(null, arguments[0], arguments[1], arguments[2]);}};}}if(o.editable){var fnE=ezEditConfig.on_added_dom_row;ezEditConfig.on_added_dom_row = function(){o.nbFilterableRows++;if(!o.paging){o.Cpt.rowsCounter.refresh();}else {o.nbRows++;o.nbVisibleRows++;o.nbFilterableRows++;o.paging = false;o.Cpt.paging.destroy();o.Cpt.paging.addPaging();}if(o.alternateBgs){o.Cpt.alternateRows.init();}if(fnE){fnE.call(null, arguments[0], arguments[1], arguments[2]);}};if(ezEditConfig.actions && ezEditConfig.actions["delete"]){var fnF=ezEditConfig.actions["delete"].on_after_submit;ezEditConfig.actions["delete"].on_after_submit = function(){o.nbFilterableRows--;if(!o.paging){o.Cpt.rowsCounter.refresh();}else {o.nbRows--;o.nbVisibleRows--;o.nbFilterableRows--;o.paging = false;o.Cpt.paging.destroy();o.Cpt.paging.addPaging(false);}if(o.alternateBgs){o.Cpt.alternateRows.init();}if(fnF){fnF.call(null, arguments[0], arguments[1]);}};}}try{o.ezEditTable = new EditTable(o.id, ezEditConfig, startRow);o.ezEditTable.Init();}catch(e) {console.log(ezEditConfig.err);}}, writable:true, configurable:true}, resetValues:{value:function resetValues(){this.EvtManager(this.Evt.name.resetvalues);}, writable:true, configurable:true}, _resetValues:{value:function _resetValues(){if(this.rememberGridValues && this.fillSlcOnDemand){this.resetGridValues(this.fltsValuesCookie);}if(this.rememberPageLen){this.Cpt.paging.resetPageLength(this.pgLenCookie);}if(this.rememberPageNb){this.Cpt.paging.resetPage(this.pgNbCookie);}}, writable:true, configurable:true}, resetGridValues:{value:function resetGridValues(name){if(!this.fillSlcOnDemand){return;}var fltsValues=this.Cpt.store.getFilterValues(name), slcFltsIndex=this.getFiltersByType(this.fltTypeSlc, true), multiFltsIndex=this.getFiltersByType(this.fltTypeMulti, true);if(Number(fltsValues[fltsValues.length - 1]) === this.fltIds.length){for(var i=0; i < fltsValues.length - 1; i++) {if(fltsValues[i] === " "){continue;}var s, opt;if(this["col" + i] === this.fltTypeSlc || this["col" + i] === this.fltTypeMulti){var slc=dom.id(this.fltIds[i]);slc.options[0].selected = false;if(array.has(slcFltsIndex, i)){opt = dom.createOpt(fltsValues[i], fltsValues[i], true);slc.appendChild(opt);this.hasStoredValues = true;}if(array.has(multiFltsIndex, i)){s = fltsValues[i].split(" " + this.orOperator + " ");for(j = 0; j < s.length; j++) {if(s[j] === ""){continue;}opt = dom.createOpt(s[j], s[j], true);slc.appendChild(opt);this.hasStoredValues = true;}}}else if(this["col" + i] == this.fltTypeCheckList){var checkList=this.Cpt.checkList;var divChk=checkList.checkListDiv[i];divChk.title = divChk.innerHTML;divChk.innerHTML = "";var ul=dom.create("ul", ["id", this.fltIds[i]], ["colIndex", i]);ul.className = checkList.checkListCssClass;var li0=dom.createCheckItem(this.fltIds[i] + "_0", "", this.displayAllText);li0.className = checkList.checkListItemCssClass;ul.appendChild(li0);divChk.appendChild(ul);s = fltsValues[i].split(" " + this.orOperator + " ");for(j = 0; j < s.length; j++) {if(s[j] === ""){continue;}var li=dom.createCheckItem(this.fltIds[i] + "_" + (j + 1), s[j], s[j]);li.className = checkList.checkListItemCssClass;ul.appendChild(li);li.check.checked = true;checkList.setCheckListValues(li.check);this.hasStoredValues = true;}}}if(!this.hasStoredValues && this.paging){this.Cpt.paging.setPagingInfo();}}}, writable:true, configurable:true}, filter:{value:function filter(){this.EvtManager(this.Evt.name.filter);}, writable:true, configurable:true}, _filter:{value:function _filter(){if(!this.fltGrid || !this._hasGrid && !this.isFirstLoad){return;}if(this.onBeforeFilter){this.onBeforeFilter.call(null, this);}var row=this.tbl.rows, f=this.cfg, hiddenrows=0;this.validRowsIndex = [];var o=this;if(this.highlightKeywords){this.Cpt.highlightKeyword.unhighlightAll();}if(this.popUpFilters){this.Cpt.popupFilter.buildIcons();}if(this.markActiveColumns){this.clearActiveColumns();}this.searchArgs = this.getFiltersValue();var num_cell_data, nbFormat;var re_le=new RegExp(this.leOperator), re_ge=new RegExp(this.geOperator), re_l=new RegExp(this.lwOperator), re_g=new RegExp(this.grOperator), re_d=new RegExp(this.dfOperator), re_lk=new RegExp(str.rgxEsc(this.lkOperator)), re_eq=new RegExp(this.eqOperator), re_st=new RegExp(this.stOperator), re_en=new RegExp(this.enOperator), re_an=new RegExp(this.anOperator), re_cr=new RegExp(this.curExp), re_em=this.emOperator, re_nm=this.nmOperator, re_re=new RegExp(str.rgxEsc(this.rgxOperator));function highlight(str, ok, cell){if(o.highlightKeywords && ok){str = str.replace(re_lk, "");str = str.replace(re_eq, "");str = str.replace(re_st, "");str = str.replace(re_en, "");var w=str;if(re_le.test(str) || re_ge.test(str) || re_l.test(str) || re_g.test(str) || re_d.test(str)){w = dom.getText(cell);}if(w !== ""){o.Cpt.highlightKeyword.highlight(cell, w, o.Cpt.highlightKeyword.highlightCssClass);}}}function hasArg(sA, cell_data, j){var occurence;var hasLO=re_l.test(sA), hasLE=re_le.test(sA), hasGR=re_g.test(sA), hasGE=re_ge.test(sA), hasDF=re_d.test(sA), hasEQ=re_eq.test(sA), hasLK=re_lk.test(sA), hasAN=re_an.test(sA), hasST=re_st.test(sA), hasEN=re_en.test(sA), hasEM=re_em === sA, hasNM=re_nm === sA, hasRE=re_re.test(sA);var isLDate=hasLO && isValidDate(sA.replace(re_l, ""), dtType);var isLEDate=hasLE && isValidDate(sA.replace(re_le, ""), dtType);var isGDate=hasGR && isValidDate(sA.replace(re_g, ""), dtType);var isGEDate=hasGE && isValidDate(sA.replace(re_ge, ""), dtType);var isDFDate=hasDF && isValidDate(sA.replace(re_d, ""), dtType);var isEQDate=hasEQ && isValidDate(sA.replace(re_eq, ""), dtType);var dte1, dte2;if(isValidDate(cell_data, dtType)){dte1 = formatDate(cell_data, dtType);if(isLDate){dte2 = formatDate(sA.replace(re_l, ""), dtType);occurence = dte1 < dte2;}else if(isLEDate){dte2 = formatDate(sA.replace(re_le, ""), dtType);occurence = dte1 <= dte2;}else if(isGEDate){dte2 = formatDate(sA.replace(re_ge, ""), dtType);occurence = dte1 >= dte2;}else if(isGDate){dte2 = formatDate(sA.replace(re_g, ""), dtType);occurence = dte1 > dte2;}else if(isDFDate){dte2 = formatDate(sA.replace(re_d, ""), dtType);occurence = dte1.toString() != dte2.toString();}else if(isEQDate){dte2 = formatDate(sA.replace(re_eq, ""), dtType);occurence = dte1.toString() == dte2.toString();}else if(re_lk.test(sA)){occurence = o._containsStr(sA.replace(re_lk, ""), cell_data, null, false);}else if(isValidDate(sA, dtType)){dte2 = formatDate(sA, dtType);occurence = dte1.toString() == dte2.toString();}else if(hasEM){occurence = str.isEmpty(cell_data);}else if(hasNM){occurence = !str.isEmpty(cell_data);}}else {if(o.hasColNbFormat && o.colNbFormat[j]){num_cell_data = removeNbFormat(cell_data, o.colNbFormat[j]);nbFormat = o.colNbFormat[j];}else {if(o.thousandsSeparator === "," && o.decimalSeparator === "."){num_cell_data = removeNbFormat(cell_data, "us");nbFormat = "us";}else {num_cell_data = removeNbFormat(cell_data, "eu");nbFormat = "eu";}}if(hasLE){occurence = num_cell_data <= removeNbFormat(sA.replace(re_le, ""), nbFormat);}else if(hasGE){occurence = num_cell_data >= removeNbFormat(sA.replace(re_ge, ""), nbFormat);}else if(hasLO){occurence = num_cell_data < removeNbFormat(sA.replace(re_l, ""), nbFormat);}else if(hasGR){occurence = num_cell_data > removeNbFormat(sA.replace(re_g, ""), nbFormat);}else if(hasDF){occurence = o._containsStr(sA.replace(re_d, ""), cell_data)?false:true;}else if(hasLK){occurence = o._containsStr(sA.replace(re_lk, ""), cell_data, null, false);}else if(hasEQ){occurence = o._containsStr(sA.replace(re_eq, ""), cell_data, null, true);}else if(hasST){occurence = cell_data.indexOf(sA.replace(re_st, "")) === 0?true:false;}else if(hasEN){var searchArg=sA.replace(re_en, "");occurence = cell_data.lastIndexOf(searchArg, cell_data.length - 1) === cell_data.length - 1 - (searchArg.length - 1) && cell_data.lastIndexOf(searchArg, cell_data.length - 1) > -1?true:false;}else if(hasEM){occurence = str.isEmpty(cell_data);}else if(hasNM){occurence = !str.isEmpty(cell_data);}else if(hasRE){try{var srchArg=sA.replace(re_re, "");var rgx=new RegExp(srchArg);occurence = rgx.test(cell_data);}catch(e) {occurence = false;}}else {var fCol=f["col_" + j];occurence = o._containsStr(sA, cell_data, !fCol?o.fltTypeInp:fCol);}}return occurence;}for(var k=this.refRow; k < this.nbRows; k++) {if(row[k].style.display === "none"){row[k].style.display = "";}var cell=row[k].cells, nchilds=cell.length;if(nchilds !== this.nbCells){continue;}var occurence=[], isRowValid=this.searchType === "include"?true:false, singleFltRowValid=false;for(var j=0; j < nchilds; j++) {var sA=this.searchArgs[this.singleSearchFlt?0:j], dtType=this.hasColDateType?this.colDateType[j]:this.defaultDateType;if(sA === ""){continue;}var cell_data=str.matchCase(this.getCellData(j, cell[j]), this.matchCase);var sAOrSplit=sA.split(this.orOperator), hasMultiOrSA=sAOrSplit.length > 1?true:false, sAAndSplit=sA.split(this.anOperator), hasMultiAndSA=sAAndSplit.length > 1?true:false;if(hasMultiOrSA || hasMultiAndSA){var cS, occur=false, s=hasMultiOrSA?sAOrSplit:sAAndSplit;for(var w=0; w < s.length; w++) {cS = str.trim(s[w]);occur = hasArg(cS, cell_data, j);highlight(cS, occur, cell[j]);if(hasMultiOrSA && occur){break;}if(hasMultiAndSA && !occur){break;}}occurence[j] = occur;}else {occurence[j] = hasArg(str.trim(sA), cell_data, j);highlight(sA, occurence[j], cell[j]);}if(!occurence[j]){isRowValid = this.searchType === "include"?false:true;}if(this.singleSearchFlt && occurence[j]){singleFltRowValid = true;}if(this.popUpFilters){this.Cpt.popupFilter.buildIcon(j, true);}if(this.markActiveColumns){if(k === this.refRow){if(this.onBeforeActiveColumn){this.onBeforeActiveColumn.call(null, this, j);}dom.addClass(this.getHeaderElement(j), this.activeColumnsCssClass);if(this.onAfterActiveColumn){this.onAfterActiveColumn.call(null, this, j);}}}}if(this.singleSearchFlt && singleFltRowValid){isRowValid = true;}if(!isRowValid){this.validateRow(k, false);if(this.hasVisibleRows && array.has(this.visibleRows, k) && !this.paging){this.validRowsIndex.push(k);}else {hiddenrows++;}}else {this.validateRow(k, true);this.validRowsIndex.push(k);if(this.alternateBgs){this.Cpt.alternateRows.setRowBg(k, this.validRowsIndex.length);}if(this.onRowValidated){this.onRowValidated.call(null, this, k);}}}this.nbVisibleRows = this.validRowsIndex.length;this.nbHiddenRows = hiddenrows;this.isStartBgAlternate = false;if(this.rememberGridValues){this.Cpt.store.saveFilterValues(this.fltsValuesCookie);}if(!this.paging){this.applyGridProps();}else {this.startPagingRow = 0;this.currentPageNb = 1;this.Cpt.paging.setPagingInfo(this.validRowsIndex);}if(this.onAfterFilter){this.onAfterFilter.call(null, this);}}, writable:true, configurable:true}, applyGridProps:{value:function applyGridProps(){if(this.activeFlt && str.lower(this.activeFlt.nodeName) === this.fltTypeSlc && !this.popUpFilters){this.activeFlt.blur();if(this.activeFlt.parentNode){this.activeFlt.parentNode.focus();}}if(this.visibleRows){this.enforceVisibility();}if(this.hasColOperation){this.Cpt.colOps.calc();}if(this.linkedFilters){this.linkFilters();}var nr=!this.paging && this.hasVisibleRows?this.nbVisibleRows - this.visibleRows.length:this.nbVisibleRows;if(this.rowsCounter){this.Cpt.rowsCounter.refresh(nr);}if(this.popUpFilters){this.Cpt.popupFilter.closeAll();}}, writable:true, configurable:true}, getColValues:{value:function getColValues(colindex, num, exclude){if(!this.fltGrid){return;}var row=this.tbl.rows, colValues=[];for(var i=this.refRow; i < this.nbRows; i++) {var isExludedRow=false;if(exclude && types.isArray(exclude)){isExludedRow = array.has(exclude, i);}var cell=row[i].cells, nchilds=cell.length;if(nchilds == this.nbCells && !isExludedRow){for(var j=0; j < nchilds; j++) {if(j === colindex && row[i].style.display === ""){var cell_data=str.lower(this.getCellData(j, cell[j])), nbFormat=this.colNbFormat?this.colNbFormat[colindex]:null, data=num?removeNbFormat(cell_data, nbFormat):cell_data;colValues.push(data);}}}}return colValues;}, writable:true, configurable:true}, getFilterValue:{value:function getFilterValue(index){if(!this.fltGrid){return;}var fltValue, flt=this.getFilterElement(index);if(!flt){return "";}var fltColType=this.fltCol[index];if(fltColType !== this.fltTypeMulti && fltColType !== this.fltTypeCheckList){fltValue = flt.value;}else if(fltColType === this.fltTypeMulti){fltValue = "";for(var j=0; j < flt.options.length; j++) {if(flt.options[j].selected){fltValue = fltValue.concat(flt.options[j].value + " " + this.orOperator + " ");}}fltValue = fltValue.substr(0, fltValue.length - 4);}else if(fltColType === this.fltTypeCheckList){if(flt.getAttribute("value") !== null){fltValue = flt.getAttribute("value");fltValue = fltValue.substr(0, fltValue.length - 3);}else {fltValue = "";}}return fltValue;}, writable:true, configurable:true}, getFiltersValue:{value:function getFiltersValue(){if(!this.fltGrid){return;}var searchArgs=[];for(var i=0; i < this.fltIds.length; i++) {searchArgs.push(str.trim(str.matchCase(this.getFilterValue(i), this.matchCase)));}return searchArgs;}, writable:true, configurable:true}, getFilterId:{value:function getFilterId(index){if(!this.fltGrid){return;}return this.fltIds[i];}, writable:true, configurable:true}, getFiltersByType:{value:function getFiltersByType(type, bool){if(!this.fltGrid){return;}var arr=[];for(var i=0; i < this.fltIds.length; i++) {var fltType=this["col" + i];if(fltType === str.lower(type)){var a=bool?i:this.fltIds[i];arr.push(a);}}return arr;}, writable:true, configurable:true}, getFilterElement:{value:function getFilterElement(index){if(!this.fltGrid){return null;}return dom.id(this.fltIds[index]);}, writable:true, configurable:true}, getCellsNb:{value:function getCellsNb(rowIndex){var tr=!rowIndex?this.tbl.rows[0]:this.tbl.rows[rowIndex];return tr.cells.length;}, writable:true, configurable:true}, getRowsNb:{value:function getRowsNb(includeHeaders){var s=!this.refRow?0:this.refRow, ntrs=this.tbl.rows.length;if(includeHeaders){s = 0;}return parseInt(ntrs - s, 10);}, writable:true, configurable:true}, getCellData:{value:function getCellData(i, cell){if(i === undefined || !cell){return "";}if(this.customCellData && array.has(this.customCellDataCols, i)){return this.customCellData.call(null, this, cell, i);}else {return dom.getText(cell);}}, writable:true, configurable:true}, getTableData:{value:function getTableData(){var row=this.tbl.rows;for(var k=this.refRow; k < this.nbRows; k++) {var rowData=[k, []];var cells=row[k].cells;for(var j=0; j < cells.length; j++) {var cell_data=this.getCellData(j, cells[j]);rowData[1].push(cell_data);}this.tblData.push(rowData);}return this.tblData;}, writable:true, configurable:true}, getFilteredData:{value:function getFilteredData(includeHeaders){if(!this.validRowsIndex){return [];}var row=this.tbl.rows, filteredData=[];if(includeHeaders){var table=this.gridLayout?this.headTbl:this.tbl, r=table.rows[this.headersRow], rowData=[r.rowIndex, []];for(var j=0; j < this.nbCells; j++) {var headerText=this.getCellData(j, r.cells[j]);rowData[1].push(headerText);}filteredData.push(rowData);}var validRows=this.getValidRowsIndex(true);for(var i=0; i < validRows.length; i++) {var rData=[this.validRowsIndex[i], []], cells=row[this.validRowsIndex[i]].cells;for(var k=0; k < cells.length; k++) {var cell_data=this.getCellData(k, cells[k]);rData[1].push(cell_data);}filteredData.push(rData);}return filteredData;}, writable:true, configurable:true}, getFilteredDataCol:{value:function getFilteredDataCol(colIndex){if(colIndex === undefined){return [];}var data=this.getFilteredData(), colData=[];for(var i=0; i < data.length; i++) {var r=data[i], d=r[1], c=d[colIndex];colData.push(c);}return colData;}, writable:true, configurable:true}, getRowDisplay:{value:function getRowDisplay(row){if(!this.fltGrid && !types.isObj(row)){return;}return row.style.display;}, writable:true, configurable:true}, validateRow:{value:function validateRow(rowIndex, isValid){var row=this.tbl.rows[rowIndex];if(!row || str.lower(typeof isValid) !== "boolean"){return;}if(this.hasVisibleRows && array.has(this.visibleRows, rowIndex) && !this.paging){isValid = true;}var displayFlag=isValid?"":"none", validFlag=isValid?"true":"false";row.style.display = displayFlag;if(this.paging){row.setAttribute("validRow", validFlag);}}, writable:true, configurable:true}, validateAllRows:{value:function validateAllRows(){if(!this._hasGrid){return;}this.validRowsIndex = [];for(var k=this.refRow; k < this.nbFilterableRows; k++) {this.validateRow(k, true);this.validRowsIndex.push(k);}}, writable:true, configurable:true}, setFilterValue:{value:function setFilterValue(index, searcharg, doFilter){if(!this.fltGrid && !this.isFirstLoad || !this.getFilterElement(index)){return;}var slc=this.getFilterElement(index), execFilter=doFilter === undefined?true:doFilter, fltColType=this["col" + index];searcharg = searcharg === undefined?"":searcharg;if(fltColType !== this.fltTypeMulti && fltColType != this.fltTypeCheckList){slc.value = searcharg;}else if(fltColType === this.fltTypeMulti){var s=searcharg.split(" " + this.orOperator + " "), ct=0;for(var j=0; j < slc.options.length; j++) {if(s === "" || s[0] === ""){slc.options[j].selected = false;}if(slc.options[j].value === ""){slc.options[j].selected = false;}if(slc.options[j].value !== "" && array.has(s, slc.options[j].value, true)){slc.options[j].selected = true;}}}else if(fltColType === this.fltTypeCheckList){searcharg = str.matchCase(searcharg, this.matchCase);var sarg=searcharg.split(" " + this.orOperator + " "), fltValue=slc.setAttribute("value", ""), fltIndex=slc.setAttribute("indexes", "");for(var k=0; k < dom.tag(slc, "li").length; k++) {var li=dom.tag(slc, "li")[k], lbl=dom.tag(li, "label")[0], chk=dom.tag(li, "input")[0], lblTxt=str.matchCase(dom.getText(lbl), this.matchCase);if(lblTxt !== "" && array.has(sarg, lblTxt, true)){chk.checked = true;this.Cpt.checkList.setCheckListValues(chk);}else {chk.checked = false;this.Cpt.checkList.setCheckListValues(chk);}}}}, writable:true, configurable:true}, setColWidths:{value:function setColWidths(rowIndex){if(!this.fltGrid || !this.hasColWidth){return;}var o=this, rIndex;if(rowIndex === undefined){rIndex = this.tbl.rows[0].style.display != "none"?0:1;}else {rIndex = rowIndex;}setWidths(this.tbl.rows[rIndex]);function setWidths(row){if(!o && o.nbCells != o.colWidth.length){return;}if(o.nbCells == row.cells.length){for(var k=0; k < o.nbCells; k++) {row.cells[k].style.width = o.colWidth[k];}}}}, writable:true, configurable:true}, enforceVisibility:{value:function enforceVisibility(){if(this._hasGrid && this.hasVisibleRows && !this.paging){for(var i=0; i < this.visibleRows.length; i++) {if(this.visibleRows[i] <= this.nbRows){this.validateRow(this.visibleRows[i], true);}}}}, writable:true, configurable:true}, clearFilters:{value:function clearFilters(){this.EvtManager(this.Evt.name.clear);}, writable:true, configurable:true}, _clearFilters:{value:function _clearFilters(){if(!this.fltGrid){return;}if(this.onBeforeReset){this.onBeforeReset.call(null, this, this.getFiltersValue());}for(var i=0; i < this.fltIds.length; i++) {this.setFilterValue(i, "");}if(this.linkedFilters){this.activeFilterId = "";this.linkFilters();}if(this.rememberPageLen){cookie.remove(this.pgLenCookie);}if(this.rememberPageNb){cookie.remove(this.pgNbCookie);}if(this.onAfterReset){this.onAfterReset.call(null, this);}}, writable:true, configurable:true}, clearActiveColumns:{value:function clearActiveColumns(){for(var i=0; i < this.fltIds.length; i++) {dom.removeClass(this.getHeaderElement(i), this.activeColumnsCssClass);}}, writable:true, configurable:true}, refresh:{value:function refresh(config){var configObj=!config?this.cfg:config;var hasSort=this.sort;if(hasSort){this.sort = false;}this.nbRows = this.getRowsNb();this.remove();window["tf_" + this.id] = new TableFilter(this.id, this.startRow, configObj);this.isFirstLoad = true;this.fltIds = [];this.init();if(hasSort){this.st.setTBody(this.tbl.tBodies[0]);this.sort = true;}}, writable:true, configurable:true}, linkFilters:{value:function linkFilters(){var slcA1=this.getFiltersByType(this.fltTypeSlc, true), slcA2=this.getFiltersByType(this.fltTypeMulti, true), slcA3=this.getFiltersByType(this.fltTypeCheckList, true), slcIndex=slcA1.concat(slcA2);slcIndex = slcIndex.concat(slcA3);if(this.activeFilterId){var activeFlt=this.activeFilterId.split("_")[0];activeFlt = activeFlt.split(this.prfxFlt)[1];var slcSelectedValue;for(var i=0; i < slcIndex.length; i++) {var curSlc=dom.id(this.fltIds[slcIndex[i]]);slcSelectedValue = this.getFilterValue(slcIndex[i]);if(activeFlt !== slcIndex[i] || this.paging && array.has(slcA1, slcIndex[i]) && activeFlt === slcIndex[i] || !this.paging && (array.has(slcA3, slcIndex[i]) || array.has(slcA2, slcIndex[i])) || slcSelectedValue === this.displayAllText){if(array.has(slcA3, slcIndex[i])){this.Cpt.checkList.checkListDiv[slcIndex[i]].innerHTML = "";}else {curSlc.innerHTML = "";}if(this.fillSlcOnDemand){var opt0=dom.createOpt(this.displayAllText, "");if(curSlc){curSlc.appendChild(opt0);}}if(array.has(slcA3, slcIndex[i])){this.Cpt.checkList._build(slcIndex[i]);}else {this.Cpt.dropdown._build(slcIndex[i], true);}this.setFilterValue(slcIndex[i], slcSelectedValue);}}}}, writable:true, configurable:true}, _resetGrid:{value:function _resetGrid(){if(this.isFirstLoad){return;}if(!this.gridLayout){this.tbl.rows[this.filtersRowIndex].parentNode.insertBefore(this.fltGridEl, this.tbl.rows[this.filtersRowIndex]);}if(this.isExternalFlt){for(var ct=0; ct < this.externalFltTgtIds.length; ct++) {var extFlt=dom.id(this.externalFltTgtIds[ct]);if(extFlt){extFlt.appendChild(this.externalFltEls[ct]);var colFltType=this["col" + ct];if(this.gridLayout && this.externalFltEls[ct].innerHTML === "" && colFltType !== this.fltTypeInp){if(colFltType === this.fltTypeSlc || colFltType === this.fltTypeMulti){this.Cpt.dropdown.build(ct);}if(colFltType === this.fltTypeCheckList){this.Cpt.checkList.build(ct);}}}}}this.nbFilterableRows = this.getRowsNb();this.nbVisibleRows = this.nbFilterableRows;this.nbRows = this.tbl.rows.length;if(this.isSortEnabled){this.sort = true;}if(this.tbl.rows[this.filtersRowIndex].innerHTML === ""){refreshFilters(this);}else {if(this.popUpFilters){this.headersRow++;this.Cpt.popupFilter.buildAll();}}function refreshFilters(o){o.tbl.deleteRow(o.filtersRowIndex);o.remove();o.fltIds = [];o.isFirstLoad = true;if(o.popUpFilters){o.Cpt.popupFilter.destroy();}o._AddGrid();}if(!this.gridLayout){dom.addClass(this.tbl, this.prfxTf);}this._hasGrid = true;}, writable:true, configurable:true}, _containsStr:{value:function _containsStr(arg, data, fltType, forceMatch){var regexp, modifier=this.matchCase?"g":"gi", exactMatch=!forceMatch?this.exactMatch:forceMatch;if(exactMatch || fltType !== this.fltTypeInp && fltType){regexp = new RegExp("(^\\s*)" + str.rgxEsc(arg) + "(\\s*$)", modifier);}else {regexp = new RegExp(str.rgxEsc(arg), modifier);}return regexp.test(data);}, writable:true, configurable:true}, isImported:{value:function isImported(filePath, type){var imported=false, importType=!type?"script":type, attr=importType == "script"?"src":"href", files=dom.tag(doc, importType);for(var i=0; i < files.length; i++) {if(files[i][attr] === undefined){continue;}if(files[i][attr].match(filePath)){imported = true;break;}}return imported;}, writable:true, configurable:true}, includeFile:{value:function includeFile(fileId, filePath, callback, type){var ftype=!type?"script":type, imported=this.isImported(filePath, ftype);if(imported){return;}var o=this, isLoaded=false, file, head=dom.tag(doc, "head")[0];if(str.lower(ftype) === "link"){file = dom.create("link", ["id", fileId], ["type", "text/css"], ["rel", "stylesheet"], ["href", filePath]);}else {file = dom.create("script", ["id", fileId], ["type", "text/javascript"], ["src", filePath]);}file.onload = file.onreadystatechange = function(){if(!isLoaded && (!this.readyState || this.readyState === "loaded" || this.readyState === "complete")){isLoaded = true;if(typeof callback === "function"){callback.call(null, o);}}};file.onerror = function(){throw new Error("TF script could not load:\n" + this.src);};head.appendChild(file);}, writable:true, configurable:true}, hasGrid:{value:function hasGrid(){return this._hasGrid;}, writable:true, configurable:true}, getFiltersId:{value:function getFiltersId(){if(!this._hasGrid){return;}return this.fltIds;}, writable:true, configurable:true}, getValidRowsIndex:{value:function getValidRowsIndex(reCalc){if(!this._hasGrid){return;}if(!reCalc){return this.validRowsIndex;}this.validRowsIndex = [];for(var k=this.refRow; k < this.getRowsNb(true); k++) {var r=this.tbl.rows[k];if(!this.paging){if(this.getRowDisplay(r) !== "none"){this.validRowsIndex.push(r.rowIndex);}}else {if(r.getAttribute("validRow") === "true" || r.getAttribute("validRow") === null){this.validRowsIndex.push(r.rowIndex);}}}return this.validRowsIndex;}, writable:true, configurable:true}, getFiltersRowIndex:{value:function getFiltersRowIndex(){if(!this._hasGrid){return;}return this.filtersRowIndex;}, writable:true, configurable:true}, getHeadersRowIndex:{value:function getHeadersRowIndex(){if(!this._hasGrid){return;}return this.headersRow;}, writable:true, configurable:true}, getStartRowIndex:{value:function getStartRowIndex(){if(!this._hasGrid){return;}return this.refRow;}, writable:true, configurable:true}, getLastRowIndex:{value:function getLastRowIndex(){if(!this._hasGrid){return;}return this.nbRows - 1;}, writable:true, configurable:true}, getHeaderElement:{value:function getHeaderElement(colIndex){var table=this.gridLayout?this.headTbl:this.tbl;var header, tHead=dom.tag(this.tbl, "thead");for(var i=0; i < this.nbCells; i++) {if(i !== colIndex){continue;}if(tHead.length === 0){header = table.rows[this.headersRow].cells[i];}if(tHead.length === 1){header = tHead[0].rows[this.headersRow].cells[i];}break;}return header;}, writable:true, configurable:true}, config:{value:function config(){return this.cfg;}, writable:true, configurable:true}, getFilterableRowsNb:{value:function getFilterableRowsNb(){return this.getRowsNb(false);}, writable:true, configurable:true}});return TableFilter;})();module.exports = TableFilter;function numSortAsc(a, b){return a - b;}function numSortDesc(a, b){return b - a;}function removeNbFormat(data, format){if(!data){return;}if(!format){format = "us";}var n=data;if(str.lower(format) === "us"){n = +n.replace(/[^\d\.-]/g, "");}else {n = +n.replace(/[^\d\,-]/g, "").replace(",", ".");}return n;}function setOuterHtml(){if(doc.body.__defineGetter__){if(HTMLElement){var element=HTMLElement.prototype;if(element.__defineGetter__){element.__defineGetter__("outerHTML", function(){var parent=this.parentNode;var el=dom.create(parent.tagName);el.appendChild(this);var shtml=el.innerHTML;parent.appendChild(this);return shtml;});}if(element.__defineSetter__){HTMLElement.prototype.__defineSetter__("outerHTML", function(sHTML){var r=this.ownerDocument.createRange();r.setStartBefore(this);var df=r.createContextualFragment(sHTML);this.parentNode.replaceChild(df, this);return sHTML;});}}}}});
//# sourceMappingURL=tablefilter.js.map